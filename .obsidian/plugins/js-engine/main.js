/*
-------------------------------------------
JS Engine - Release Build
-------------------------------------------
By: Moritz Jung (https://mprojectscode.github.io/)
Time: Sat, 25 Nov 2023 13:33:07 GMT
Version: 0.0.8
-------------------------------------------
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";var da=Object.create;var yn=Object.defineProperty;var ha=Object.getOwnPropertyDescriptor;var pa=Object.getOwnPropertyNames;var ma=Object.getPrototypeOf,ya=Object.prototype.hasOwnProperty;var _a=(n,e,t)=>e in n?yn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var St=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),$o=(n,e)=>{for(var t in e)yn(n,t,{get:e[t],enumerable:!0})},es=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of pa(e))!ya.call(n,o)&&o!==t&&yn(n,o,{get:()=>e[o],enumerable:!(r=ha(e,o))||r.enumerable});return n};var Lt=(n,e,t)=>(t=n!=null?da(ma(n)):{},es(e||!n||!n.__esModule?yn(t,"default",{value:n,enumerable:!0}):t,n)),ga=n=>es(yn({},"__esModule",{value:!0}),n);var ge=(n,e,t)=>(_a(n,typeof e!="symbol"?e+"":e,t),t);var Ms=St((Mo,ko)=>{(function(n,e){typeof Mo=="object"&&typeof ko!="undefined"?ko.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis!="undefined"?globalThis:n||self).dayjs=e()})(Mo,function(){"use strict";var n=1e3,e=6e4,t=36e5,r="millisecond",o="second",i="minute",s="hour",a="day",l="week",u="month",c="quarter",d="year",f="date",p="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,F={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(k){var y=["th","st","nd","rd"],m=k%100;return"["+k+(y[(m-20)%10]||y[m]||y[0])+"]"}},L=function(k,y,m){var x=String(k);return!x||x.length>=y?k:""+Array(y+1-x.length).join(m)+k},J={s:L,z:function(k){var y=-k.utcOffset(),m=Math.abs(y),x=Math.floor(m/60),w=m%60;return(y<=0?"+":"-")+L(x,2,"0")+":"+L(w,2,"0")},m:function k(y,m){if(y.date()<m.date())return-k(m,y);var x=12*(m.year()-y.year())+(m.month()-y.month()),w=y.clone().add(x,u),C=m-w<0,O=y.clone().add(x+(C?-1:1),u);return+(-(x+(m-w)/(C?w-O:O-w))||0)},a:function(k){return k<0?Math.ceil(k)||0:Math.floor(k)},p:function(k){return{M:u,y:d,w:l,d:a,D:f,h:s,m:i,s:o,ms:r,Q:c}[k]||String(k||"").toLowerCase().replace(/s$/,"")},u:function(k){return k===void 0}},H="en",N={};N[H]=F;var Z="$isDayjsObject",ie=function(k){return k instanceof V||!(!k||!k[Z])},z=function k(y,m,x){var w;if(!y)return H;if(typeof y=="string"){var C=y.toLowerCase();N[C]&&(w=C),m&&(N[C]=m,w=C);var O=y.split("-");if(!w&&O.length>1)return k(O[0])}else{var Q=y.name;N[Q]=y,w=Q}return!x&&w&&(H=w),w||!x&&H},M=function(k,y){if(ie(k))return k.clone();var m=typeof y=="object"?y:{};return m.date=k,m.args=arguments,new V(m)},T=J;T.l=z,T.i=ie,T.w=function(k,y){return M(k,{locale:y.$L,utc:y.$u,x:y.$x,$offset:y.$offset})};var V=function(){function k(m){this.$L=z(m.locale,null,!0),this.parse(m),this.$x=this.$x||m.x||{},this[Z]=!0}var y=k.prototype;return y.parse=function(m){this.$d=function(x){var w=x.date,C=x.utc;if(w===null)return new Date(NaN);if(T.u(w))return new Date;if(w instanceof Date)return new Date(w);if(typeof w=="string"&&!/Z$/i.test(w)){var O=w.match(h);if(O){var Q=O[2]-1||0,K=(O[7]||"0").substring(0,3);return C?new Date(Date.UTC(O[1],Q,O[3]||1,O[4]||0,O[5]||0,O[6]||0,K)):new Date(O[1],Q,O[3]||1,O[4]||0,O[5]||0,O[6]||0,K)}}return new Date(w)}(m),this.init()},y.init=function(){var m=this.$d;this.$y=m.getFullYear(),this.$M=m.getMonth(),this.$D=m.getDate(),this.$W=m.getDay(),this.$H=m.getHours(),this.$m=m.getMinutes(),this.$s=m.getSeconds(),this.$ms=m.getMilliseconds()},y.$utils=function(){return T},y.isValid=function(){return this.$d.toString()!==p},y.isSame=function(m,x){var w=M(m);return this.startOf(x)<=w&&w<=this.endOf(x)},y.isAfter=function(m,x){return M(m)<this.startOf(x)},y.isBefore=function(m,x){return this.endOf(x)<M(m)},y.$g=function(m,x,w){return T.u(m)?this[x]:this.set(w,m)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(m,x){var w=this,C=!!T.u(x)||x,O=T.p(m),Q=function(be,ae){var Ve=T.w(w.$u?Date.UTC(w.$y,ae,be):new Date(w.$y,ae,be),w);return C?Ve:Ve.endOf(a)},K=function(be,ae){return T.w(w.toDate()[be].apply(w.toDate("s"),(C?[0,0,0,0]:[23,59,59,999]).slice(ae)),w)},X=this.$W,me=this.$M,xe=this.$D,tt="set"+(this.$u?"UTC":"");switch(O){case d:return C?Q(1,0):Q(31,11);case u:return C?Q(1,me):Q(0,me+1);case l:var nt=this.$locale().weekStart||0,Ue=(X<nt?X+7:X)-nt;return Q(C?xe-Ue:xe+(6-Ue),me);case a:case f:return K(tt+"Hours",0);case s:return K(tt+"Minutes",1);case i:return K(tt+"Seconds",2);case o:return K(tt+"Milliseconds",3);default:return this.clone()}},y.endOf=function(m){return this.startOf(m,!1)},y.$set=function(m,x){var w,C=T.p(m),O="set"+(this.$u?"UTC":""),Q=(w={},w[a]=O+"Date",w[f]=O+"Date",w[u]=O+"Month",w[d]=O+"FullYear",w[s]=O+"Hours",w[i]=O+"Minutes",w[o]=O+"Seconds",w[r]=O+"Milliseconds",w)[C],K=C===a?this.$D+(x-this.$W):x;if(C===u||C===d){var X=this.clone().set(f,1);X.$d[Q](K),X.init(),this.$d=X.set(f,Math.min(this.$D,X.daysInMonth())).$d}else Q&&this.$d[Q](K);return this.init(),this},y.set=function(m,x){return this.clone().$set(m,x)},y.get=function(m){return this[T.p(m)]()},y.add=function(m,x){var w,C=this;m=Number(m);var O=T.p(x),Q=function(me){var xe=M(C);return T.w(xe.date(xe.date()+Math.round(me*m)),C)};if(O===u)return this.set(u,this.$M+m);if(O===d)return this.set(d,this.$y+m);if(O===a)return Q(1);if(O===l)return Q(7);var K=(w={},w[i]=e,w[s]=t,w[o]=n,w)[O]||1,X=this.$d.getTime()+m*K;return T.w(X,this)},y.subtract=function(m,x){return this.add(-1*m,x)},y.format=function(m){var x=this,w=this.$locale();if(!this.isValid())return w.invalidDate||p;var C=m||"YYYY-MM-DDTHH:mm:ssZ",O=T.z(this),Q=this.$H,K=this.$m,X=this.$M,me=w.weekdays,xe=w.months,tt=w.meridiem,nt=function(ae,Ve,fe,Me){return ae&&(ae[Ve]||ae(x,C))||fe[Ve].slice(0,Me)},Ue=function(ae){return T.s(Q%12||12,ae,"0")},be=tt||function(ae,Ve,fe){var Me=ae<12?"AM":"PM";return fe?Me.toLowerCase():Me};return C.replace(v,function(ae,Ve){return Ve||function(fe){switch(fe){case"YY":return String(x.$y).slice(-2);case"YYYY":return T.s(x.$y,4,"0");case"M":return X+1;case"MM":return T.s(X+1,2,"0");case"MMM":return nt(w.monthsShort,X,xe,3);case"MMMM":return nt(xe,X);case"D":return x.$D;case"DD":return T.s(x.$D,2,"0");case"d":return String(x.$W);case"dd":return nt(w.weekdaysMin,x.$W,me,2);case"ddd":return nt(w.weekdaysShort,x.$W,me,3);case"dddd":return me[x.$W];case"H":return String(Q);case"HH":return T.s(Q,2,"0");case"h":return Ue(1);case"hh":return Ue(2);case"a":return be(Q,K,!0);case"A":return be(Q,K,!1);case"m":return String(K);case"mm":return T.s(K,2,"0");case"s":return String(x.$s);case"ss":return T.s(x.$s,2,"0");case"SSS":return T.s(x.$ms,3,"0");case"Z":return O}return null}(ae)||O.replace(":","")})},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(m,x,w){var C,O=this,Q=T.p(x),K=M(m),X=(K.utcOffset()-this.utcOffset())*e,me=this-K,xe=function(){return T.m(O,K)};switch(Q){case d:C=xe()/12;break;case u:C=xe();break;case c:C=xe()/3;break;case l:C=(me-X)/6048e5;break;case a:C=(me-X)/864e5;break;case s:C=me/t;break;case i:C=me/e;break;case o:C=me/n;break;default:C=me}return w?C:T.a(C)},y.daysInMonth=function(){return this.endOf(u).$D},y.$locale=function(){return N[this.$L]},y.locale=function(m,x){if(!m)return this.$L;var w=this.clone(),C=z(m,x,!0);return C&&(w.$L=C),w},y.clone=function(){return T.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},k}(),ce=V.prototype;return M.prototype=ce,[["$ms",r],["$s",o],["$m",i],["$H",s],["$W",a],["$M",u],["$y",d],["$D",f]].forEach(function(k){ce[k[1]]=function(y){return this.$g(y,k[0],k[1])}}),M.extend=function(k,y){return k.$i||(k(y,V,M),k.$i=!0),M},M.locale=z,M.isDayjs=ie,M.unix=function(k){return M(1e3*k)},M.en=N[H],M.Ls=N,M.p={},M})});var rr=St(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.P_HELPERS=Le.ParserHelpers=Le.validateRegexFlags=Le.validateRange=Le.getIndex=Le.arrayUnion=void 0;var Co=Pn();function gl(n,e){if(!(n===void 0&&e===void 0)){if(n===void 0)return e;if(e===void 0)return n;for(let t of e)n.includes(t)||n.push(t);return n}}Le.arrayUnion=gl;function vl(n){return n===void 0?-1:n.index}Le.getIndex=vl;function bl(n,e){if(e<n)throw new Error(`Invalid Range: max might not be smaller than min. Received [${n}, ${e}].`);if(n<0||e<0)throw new Error(`Invalid Range: max and min might not be smaller than 0. Received [${n}, ${e}].`);if(n===1/0||e===1/0)throw new Error(`Invalid Range: max and min might not be infinity. Received [${n}, ${e}].`);if(!Number.isInteger(n)||!Number.isInteger(e))throw new Error(`Invalid Range: max and min must be integers. Received [${n}, ${e}].`)}Le.validateRange=bl;function wl(n){for(let e of n)if(e!=="i"&&e!=="m"&&e!=="s"&&e!=="u")throw new Error(`RegExp flag '${e}' is not allowed. The only allowed flags are 'i', 'm', 's' and 'u'.`)}Le.validateRegexFlags=wl;var nr=class{followedBy(e){return new Co.Parser(function(r){return e.p(r.copy())})}notFollowedBy(e){return new Co.Parser(function(r){let o=r.copy(),i=e.p(o),s=r.sliceTo(o.position.index);return i.success?r.fail("not '"+s+"'"):r.succeed(void 0)})}test(e){return new Co.Parser(function(r){let o=r.input[r.position.index];return!r.atEOF()&&e(o)?r.succeedOffset(1,o):r.fail(`a character matching ${e}`)})}};Le.ParserHelpers=nr;Le.P_HELPERS=new nr});var Lo=St(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.ParserContext=void 0;var Fo=rr(),Oo=class n{constructor(e,t){this.input=e,this.position=t}moveToPosition(e){return this.position=e,this}copy(){return new n(this.input,{index:this.position.index,column:this.position.column,line:this.position.line})}getPosition(){return{index:this.position.index,column:this.position.column,line:this.position.line}}atEOF(){return this.position.index>=this.input.length}advanceTo(e){if(e<this.position.index)throw new Error(`Can not advance backwards. Current pos ${this.position.index}. Advance target index ${e}.`);if(e!==this.position.index){for(let t=this.position.index;t<e;t++)this.input[t]===`
`?(this.position.line+=1,this.position.column=1):this.position.column+=1;this.position.index=e}}sliceTo(e){return this.input.slice(this.position.index,e)}succeedOffset(e,t){return this.succeedAt(this.position.index+e,t)}failOffset(e,t){return this.failAt(this.position.index+e,t)}succeed(e){return this.succeedAt(this.position.index,e)}fail(e){return this.failAt(this.position.index,e)}succeedAt(e,t){return this.advanceTo(e),{success:!0,value:t,furthest:void 0,expected:void 0}}failAt(e,t){return this.advanceTo(e),{success:!1,value:void 0,furthest:this.position,expected:Array.isArray(t)?t:[t]}}merge(e,t){if(e===void 0)return t;let r=(0,Fo.getIndex)(e.furthest),o=(0,Fo.getIndex)(t.furthest);if(o>r)return t;let i=o===r?(0,Fo.arrayUnion)(e.expected,t.expected):e.expected;return t.furthest=e.furthest,t.expected=i,t}};ir.ParserContext=Oo});var Do=St(sr=>{"use strict";Object.defineProperty(sr,"__esModule",{value:!0});sr.P_UTILS=void 0;var or=Pn(),$=ar(),Ro=class n{static position(){return new or.Parser(e=>e.succeed(e.getPosition()))}static any(){return new or.Parser(e=>e.atEOF()?e.fail("any character"):e.succeedOffset(1,e.input[e.position.index]))}static remaining(){return new or.Parser(e=>e.succeedAt(e.input.length,e.input.slice(e.position.index)))}static eof(){return new or.Parser(e=>e.atEOF()?e.succeed(void 0):e.fail("eof"))}static digit(){return $.P.regexp(/^[0-9]/).describe("a digit")}static digits(){return $.P.regexp(/^[0-9]+/).describe("multiple digits")}static letter(){return $.P.regexp(/^[a-z]/i).describe("a letter")}static letters(){return $.P.regexp(/^[a-z]+/i).describe("multiple letters")}static unicodeLetter(){return $.P.regexp(/^\p{L}/iu).describe("a unicode letter")}static unicodeLetters(){return $.P.regexp(/^\p{L}+/iu).describe("multiple unicode letters")}static unicodeAlphanumeric(){return $.P.regexp(/^[\p{L}\p{N}]/iu).describe("a unicode alphanumeric character")}static unicodeAlphanumerics(){return $.P.regexp(/^[\p{L}\p{N}]+/iu).describe("multiple unicode alphanumeric characters")}static optionalWhitespace(){return $.P.regexp(/^\s*/).describe("optional whitespace")}static whitespace(){return $.P.regexp(/^\s+/).describe("whitespace")}static cr(){return $.P.string("\r")}static lf(){return $.P.string(`
`)}static crlf(){return $.P.string(`\r
`)}static newline(){return $.P.or(this.crlf(),this.lf(),this.cr()).describe("newline")}static prefix(e,t,r){return $.P.sequenceMap((o,i)=>o.reduce((s,a)=>r(a,s),i),e.many(),t)}static postfix(e,t,r){return $.P.sequenceMap((o,i)=>i.reduce((s,a)=>r(a,s),o),t,e.many())}static binaryRight(e,t,r){return $.P.sequenceMap((o,i)=>o.reverse().reduce((s,a)=>{let[l,u]=a;return r(l,u,s)},i),$.P.sequence(t,e.trim(this.optionalWhitespace())).many(),t)}static binaryLeft(e,t,r){return $.P.sequenceMap((o,i)=>i.reduce((s,a)=>{let[l,u]=a;return r(s,l,u)},o),t,$.P.sequence(e.trim(this.optionalWhitespace()),t).many())}static binaryRightRange(e,t,r){return $.P.sequenceMap((o,i,s)=>o.reverse().reduce((a,l)=>{let[u,c,d]=l;return r({from:u,to:s},c,d,a)},i),$.P.sequence(n.position(),t,e.trim(this.optionalWhitespace())).many(),t,n.position())}static binaryLeftRange(e,t,r){return $.P.sequenceMap((o,i,s)=>s.reduce((a,l)=>{let[u,c,d]=l;return r({from:o,to:d},a,u,c)},i),n.position(),t,$.P.sequence(e.trim(this.optionalWhitespace()),t,n.position()).many())}static func(e,t,r){let o=typeof e=="string"?$.P.string(e):e;return $.P.sequenceMap((i,s,a,l,u,c)=>r(i,l),o,$.P.string("("),this.optionalWhitespace(),t,this.optionalWhitespace(),$.P.string(")"))}};sr.P_UTILS=Ro});var qo=St(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.ParsingError=Yt.createParsingErrorMessage=void 0;function js(n,e,t){let r=`Expected ${e.expected.sort().join(" or ")}`,o=`Parse Failure: ${r} at index ${e.furthest.index}, line ${e.furthest.line}, column ${e.furthest.column}.`;if(t){let s=n.split(`
`)[e.furthest.line-1],a=`${e.furthest.line} |   `;o+=`

${a}${s}`,o+=`
${" ".repeat(e.furthest.column-1+a.length)}^ (${r})`}return o}Yt.createParsingErrorMessage=js;var No=class extends Error{constructor(e,t){super(js(e,t,!0))}};Yt.ParsingError=No});var Pn=St(lr=>{"use strict";Object.defineProperty(lr,"__esModule",{value:!0});lr.Parser=void 0;var xl=Lo(),He=ar(),jo=rr(),Vt=Do(),Ml=qo(),Wo=class n{constructor(e){this.p=e}tryParse(e){return this.p(new xl.ParserContext(e,{index:0,line:1,column:1}))}parse(e){let t=this.tryParse(e);if(t.success)return t.value;throw new Ml.ParsingError(e,t)}or(e){return He.P.or(this,e)}trim(e){return this.wrap(e,e)}trimString(e){return this.trim(He.P.string(e))}wrap(e,t){let r=this;return new n(function(i){let s=e.p(i);if(!s.success)return s;let a=i.merge(s,r.p(i));if(!a.success)return a;let l=i.merge(a,t.p(i));return l.success?i.merge(l,i.succeed(a.value)):l})}wrapString(e,t){return this.wrap(He.P.string(e),He.P.string(t))}then(e){let t=this;return new n(function(o){let i=t.p(o);if(!i.success)return i;let s=o.merge(i,e.p(o));return s.success,s})}skip(e){let t=this;return new n(function(o){let i=t.p(o);if(!i.success)return i;let s=o.merge(i,e.p(o));return s.success?o.merge(s,o.succeed(i.value)):s})}and(e){return He.P.sequence(this,e)}many(){let e=this;return new n(function(r){let o,i=r.position.index,s=[];for(;;){let a=r.copy(),l=e.p(a);if(o=r.merge(o,l),o.success){if(a.position.index===i)throw new Error("infinite loop in many() parser detected");r.moveToPosition(a.position),s.push(o.value)}else return r.merge(o,r.succeed(s))}})}repeat(e,t){(0,jo.validateRange)(e,t);let r=this;return new n(function(i){let s,a,l=[],u=0;for(;u<e;u++)if(s=r.p(i),a=i.merge(a,s),s.success)l.push(s.value);else return a;for(;u<t;u++){let c=i.copy();if(s=r.p(c),a=i.merge(a,s),s.success)i.moveToPosition(c.position),l.push(s.value);else break}return i.merge(a,i.succeed(l))})}atMost(e){return this.repeat(0,e)}atLeast(e){return He.P.sequenceMap((t,r)=>t.concat(r),this.repeat(e,e),this.many())}separateBy(e){return He.P.separateBy(this,e)}separateByNotEmpty(e){return He.P.separateByNotEmpty(this,e)}result(e){return this.map(()=>e)}map(e){let t=this;return new n(function(o){let i=t.p(o);return i.success&&(i.value=e(i.value)),i})}marker(){return He.P.sequenceMap(function(t,r,o){return{value:r,range:{from:t,to:o}}},Vt.P_UTILS.position(),this,Vt.P_UTILS.position())}namedMarker(e){return He.P.sequenceMap(function(r,o,i){return{value:o,name:e,range:{from:r,to:i}}},Vt.P_UTILS.position(),this,Vt.P_UTILS.position())}node(e){return He.P.sequenceMap(function(r,o,i){return e(o,{from:r,to:i})},Vt.P_UTILS.position(),this,Vt.P_UTILS.position())}followedBy(e){return this.skip(jo.P_HELPERS.followedBy(e))}notFollowedBy(e){return this.skip(jo.P_HELPERS.notFollowedBy(e))}describe(e){typeof e=="string"&&(e=[e]);let t=this;return new n(function(o){let i=t.p(o);return i.expected!==void 0&&i.expected.length!==0&&(i.expected=e),i})}box(e){let t=this;return new n(function(o){var i;let s=t.p(o);return s.expected!==void 0&&s.expected.length!==0&&(s.expected=[`(${(i=s.expected)===null||i===void 0?void 0:i.join(" or ")} as part of ${e})`]),s})}optional(e){return this.or(He.P.succeed(e))}chain(e){let t=this;return new n(function(o){let i=t.p(o);if(!i.success)return i;let a=e(i.value).p(o);return o.merge(i,a)})}thenEof(){let e=this;return new n(function(r){let o=e.p(r);return o.success?r.atEOF()?o:r.merge(o,r.fail("eof")):o})}memorize(){let e=this,t="",r=new Map,o=new Map;return new n(function(s){let a=s.position.index;if(s.input!==t)t=s.input,r.clear(),o.clear();else{let u=r.get(a),c=o.get(a);if(u!==void 0&&c!==void 0)return s.moveToPosition(Object.assign({},c)),Object.assign({},u)}let l=e.p(s);return r.set(a,Object.assign({},l)),o.set(a,s.getPosition()),l})}};lr.Parser=Wo});var ar=St(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});cr.P=void 0;var We=Pn(),ur=rr(),zo=class n{static sequence(...e){if(e.length===0)throw new Error("sequence must have at least one parser argument");return new We.Parser(function(r){let o,i=new Array(e.length);for(let s=0;s<e.length;s++){let l=e[s].p(r);if(o=r.merge(o,l),!o.success)return o;i[s]=o.value}return o.value=i,o})}static sequenceMap(e,...t){if(t.length===0)throw new Error("sequenceMap must have at least one parser argument");return new We.Parser(function(o){let i,s=new Array(t.length);for(let a=0;a<t.length;a++){let u=t[a].p(o);if(i=o.merge(i,u),!i.success)return i;s[a]=i.value}return i.value=e(...s),i})}static createLanguage(e){let t={},r={},o={};for(let i in e)o[i]=n.reference(()=>e[i](t,o)),Object.defineProperty(r,i,{get:()=>{if(t[i]!==void 0)return t[i];throw new Error(`Can not access rule '${i}' in language. Rule is not yet defined. Try to access it via 'ref'.`)}});for(let i in e)t[i]=e[i](r,o);return t}static or(...e){if(e.length===0)throw new Error("or must have at least one alternative");return new We.Parser(function(r){let o;for(let i of e){let s=i,a=r.copy(),l=s.p(a);if(o=r.merge(o,l),o.success)return r.moveToPosition(a.position),o}return o})}static separateBy(e,t){return this.separateByNotEmpty(e,t).or(n.succeed([]))}static separateByNotEmpty(e,t){return this.sequenceMap(function(o,i){return i.unshift(o),i},e,t.then(e).many())}static string(e){let t="'"+e+"'";return new We.Parser(function(o){for(let i=0;i<e.length;i++)if(o.input[o.position.index+i]!==e[i])return o.fail(t);return o.succeedAt(o.position.index+e.length,e)})}static regexp(e,t){(0,ur.validateRegexFlags)(e.flags);let r=e.source;return t!==void 0?new We.Parser(function(i){let s=i.input.slice(i.position.index),a=e.exec(s);if(a!==null){let l=t!=null?t:0;if(l>=0&&l<=a.length){let c=a[0],d=a[l];return i.succeedOffset(c.length,d)}let u="expected valid match group (0 to "+a.length+") in "+r;return i.fail(u)}else return i.fail(r)}):new We.Parser(function(i){let s=i.input.slice(i.position.index),a=e.exec(s);if(a!==null){let l=a[0];return i.succeedOffset(l.length,l)}else return i.fail(r)})}static succeed(e){return new We.Parser(function(r){return r.succeed(e)})}static fail(e){return new We.Parser(function(r){return r.fail(e)})}static oneOf(e){return ur.P_HELPERS.test(function(r){return e.includes(r)}).describe(`one character of '${e}'`)}static noneOf(e){return ur.P_HELPERS.test(function(r){return!e.includes(r)}).describe(`no character of '${e}'`)}static oneStringOf(e){return this.or(...e.map(t=>this.string(t))).describe(e.map(t=>`'${t}'`).join(" or "))}static manyOf(e){return new We.Parser(function(r){let o=r.position.index;for(;o<r.input.length&&e.includes(r.input[o]);o++);return r.succeedAt(o,r.sliceTo(o))})}static manyNotOf(e){return new We.Parser(function(r){let o=r.position.index;for(;o<r.input.length&&!e.includes(r.input[o]);o++);return r.succeedAt(o,r.sliceTo(o))})}static custom(e){return new We.Parser(e)}static range(e,t){let r=e.charCodeAt(0),o=t.charCodeAt(0);return ur.P_HELPERS.test(function(s){let a=s.charCodeAt(0);return r<=a&&a<=o}).describe(`${e}-${t}`)}static takeWhile(e){return new We.Parser(function(r){let o=r.position.index;for(;o<r.input.length&&e(r.input[o]);)o++;return r.succeedAt(o,r.input.slice(r.position.index,o))})}static reference(e){return new We.Parser(function(r){return e().p(r)})}};cr.P=zo});var Nl={};$o(Nl,{default:()=>so});module.exports=ga(Nl);var ca=require("obsidian");var va=require("obsidian"),ts={};var wt=require("obsidian");var ns=require("obsidian"),bt=class{constructor(e){this.content=e}async render(e,t,r){await ns.MarkdownRenderer.renderMarkdown(this.content,e,t,r)}};var Rt=class{toMarkdown(){return new bt(this.toString())}};var _n=class extends Rt{getType(){return"LITERAL"}};var rt=class extends Rt{constructor(){super();this.markdownElements=[]}getType(){return"NON_LITERAL"}addElement(t){if(this.allowElement(t))this.markdownElements.push(t);else throw new Error("Element not allowed in container.")}addText(t){let r=new Qe(t,!1,!1,!1);return this.addElement(r),this}addBoldText(t){let r=new Qe(t,!0,!1,!1);return this.addElement(r),this}addCursiveText(t){let r=new Qe(t,!1,!0,!1);return this.addElement(r),this}addUnderlinedText(t){let r=new Qe(t,!1,!1,!0);return this.addElement(r),this}addCode(t){let r=new gn(t);return this.addElement(r),this}createParagraph(t){let r=new bn(t);return this.addElement(r),r}createHeading(t,r){let o=new vn(t,r);return this.addElement(o),o}createBlockQuote(){let t=new xn;return this.addElement(t),t}createCallout(t,r,o=""){let i=new Mn(t,r,o);return this.addElement(i),i}createCodeBlock(t,r){let o=new wn(t,r);return this.addElement(o),o}createTable(t,r){let o=new kn(t,r);return this.addElement(o),o}},Qe=class extends _n{constructor(t,r,o,i){super();this.content=t,this.bold=r,this.cursive=o,this.underline=i}toString(){let t="",r="";return this.underline&&(t+="<b>",r="</b>"+r),this.bold&&(t+="**",r="**"+r),this.cursive&&(t+="*",r="*"+r),t+this.content+r}},gn=class extends _n{constructor(t){super();this.content=t}toString(){return`\`${this.content}\``}},vn=class extends rt{constructor(t,r){super();this.level=t,this.addText(r)}toString(){return`${"#".repeat(this.level)} ${this.markdownElements.map(t=>t.toString()).join("")}`}allowElement(t){return t.getType()==="LITERAL"}},bn=class extends rt{constructor(e){super(),this.addText(e)}toString(){return this.markdownElements.map(e=>e.toString()).join("")}allowElement(e){return e.getType()==="LITERAL"}},wn=class extends rt{constructor(t,r){super();this.language=t,this.addText(r)}allowElement(t){return t.getType()==="LITERAL"}toString(){return`\`\`\`${this.language}
${this.markdownElements.map(t=>t.toString()).join("")}
\`\`\``}},xn=class extends rt{allowElement(e){return!0}toString(){return"> "+this.markdownElements.map(e=>e.toString().replaceAll(`
`,`
> `)).join(`
> 
> `)}},Mn=class extends rt{constructor(t,r,o){super();this.title=t,this.type=r,this.args=o}allowElement(t){return!0}toString(){return`> [!${this.type}|${this.args}] ${this.title}
> `+this.markdownElements.map(t=>t.toString().replaceAll(`
`,`
> `)).join(`
> 
> `)}},kn=class extends rt{constructor(t,r){super();this.header=t,this.body=r}allowElement(t){return!0}toString(){let t=this.body.length;if(t===0)return"";let r=this.header.length;if(r===0)return"";for(let s of this.body)if(s.length!==r)throw new Error("Table rows are do not contain the same number of columns.");let o=[];for(let s=0;s<r;s++){let a=0;this.header[s].length>a&&(a=this.header[s].length);for(let l of this.body)l[s].length>a&&(a=l[s].length);o.push(a)}let i="";i+="|";for(let s=0;s<r;s++){let a=this.header[s];a+=" ".repeat(o[s]-a.length),i+=" "+a+" |"}i+=`
`,i+="|";for(let s=0;s<r;s++)i+=" "+"-".repeat(o[s])+" |";i+=`
`;for(let s=0;s<t;s++){i+="|";for(let a=0;a<r;a++){let l=this.body[s][a];l+=" ".repeat(o[a]-l.length),i+=" "+l+" |"}i+=`
`}return i}};var Dt=class extends rt{constructor(){super()}toString(){return this.markdownElements.map(e=>e.toString()).join(`

`)}allowElement(e){return!0}};var Kn=require("obsidian");var Ds=require("obsidian");function Y(){}var En=n=>n;function ao(n){return n()}function Wn(){return Object.create(null)}function oe(n){n.forEach(ao)}function we(n){return typeof n=="function"}function j(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function rs(n){return Object.keys(n).length===0}function wa(n,...e){if(n==null){for(let r of e)r(void 0);return Y}let t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function is(n,e,t){n.$$.on_destroy.push(wa(e,t))}function it(n){return n&&we(n.destroy)?n.destroy:Y}var os=typeof window!="undefined",lo=os?()=>window.performance.now():()=>Date.now(),An=os?n=>requestAnimationFrame(n):Y;var Nt=new Set;function ss(n){Nt.forEach(e=>{e.c(n)||(Nt.delete(e),e.f())}),Nt.size!==0&&An(ss)}function uo(n){let e;return Nt.size===0&&An(ss),{promise:new Promise(t=>{Nt.add(e={c:n,f:t})}),abort(){Nt.delete(e)}}}var co=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;var zn=class n{constructor(e){ge(this,"_listeners","WeakMap"in co?new WeakMap:void 0);ge(this,"_observer");ge(this,"options");this.options=e}observe(e,t){return this._listeners.set(e,t),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){var e;return(e=this._observer)!=null?e:this._observer=new ResizeObserver(t=>{var r;for(let o of t)n.entries.set(o.target,o),(r=this._listeners.get(o.target))==null||r(o)})}};zn.entries="WeakMap"in co?new WeakMap:void 0;var as=!1;function ls(){as=!0}function us(){as=!1}function _(n,e){n.appendChild(e)}function fo(n){if(!n)return document;let e=n.getRootNode?n.getRootNode():n.ownerDocument;return e&&e.host?e:n.ownerDocument}function cs(n){let e=b("style");return e.textContent="/* empty */",Ma(fo(n),e),e.sheet}function Ma(n,e){return _(n.head||n,e),e.sheet}function I(n,e,t){n.insertBefore(e,t||null)}function A(n){n.parentNode&&n.parentNode.removeChild(n)}function qt(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function b(n){return document.createElement(n)}function G(n){return document.createTextNode(n)}function B(){return G(" ")}function ye(n,e,t,r){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}function P(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function fs(n){return Array.from(n.childNodes)}function ue(n,e){e=""+e,n.data!==e&&(n.data=e)}function Bn(n,e,{bubbles:t=!1,cancelable:r=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:r})}function ds(n){let e={};return n.childNodes.forEach(t=>{e[t.slot||"default"]=!0}),e}var Un=new Map,Jn=0;function ka(n){let e=5381,t=n.length;for(;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function Ea(n,e){let t={stylesheet:cs(e),rules:{}};return Un.set(n,t),t}function Gn(n,e,t,r,o,i,s,a=0){let l=16.666/r,u=`{
`;for(let F=0;F<=1;F+=l){let L=e+(t-e)*i(F);u+=F*100+`%{${s(L,1-L)}}
`}let c=u+`100% {${s(t,1-t)}}
}`,d=`__svelte_${ka(c)}_${a}`,f=fo(n),{stylesheet:p,rules:h}=Un.get(f)||Ea(f,n);h[d]||(h[d]=!0,p.insertRule(`@keyframes ${d} ${c}`,p.cssRules.length));let v=n.style.animation||"";return n.style.animation=`${v?`${v}, `:""}${d} ${r}ms linear ${o}ms 1 both`,Jn+=1,d}function ho(n,e){let t=(n.style.animation||"").split(", "),r=t.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),o=t.length-r.length;o&&(n.style.animation=r.join(", "),Jn-=o,Jn||Aa())}function Aa(){An(()=>{Jn||(Un.forEach(n=>{let{ownerNode:e}=n.stylesheet;e&&A(e)}),Un.clear())})}var jt;function ft(n){jt=n}var It=[];var Ne=[],zt=[],mo=[],Sa=Promise.resolve(),yo=!1;function hs(){yo||(yo=!0,Sa.then(Hn))}function dt(n){zt.push(n)}function Bt(n){mo.push(n)}var po=new Set,Wt=0;function Hn(){if(Wt!==0)return;let n=jt;do{try{for(;Wt<It.length;){let e=It[Wt];Wt++,ft(e),Ia(e.$$)}}catch(e){throw It.length=0,Wt=0,e}for(ft(null),It.length=0,Wt=0;Ne.length;)Ne.pop()();for(let e=0;e<zt.length;e+=1){let t=zt[e];po.has(t)||(po.add(t),t())}zt.length=0}while(It.length);for(;mo.length;)mo.pop()();yo=!1,po.clear(),ft(n)}function Ia(n){if(n.fragment!==null){n.update(),oe(n.before_update);let e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(dt)}}function ps(n){let e=[],t=[];zt.forEach(r=>n.indexOf(r)===-1?e.push(r):t.push(r)),t.forEach(r=>r()),zt=e}var Sn;function Pa(){return Sn||(Sn=Promise.resolve(),Sn.then(()=>{Sn=null})),Sn}function _o(n,e,t){n.dispatchEvent(Bn(`${e?"intro":"outro"}${t}`))}var Yn=new Set,ht;function Xe(){ht={r:0,c:[],p:ht}}function Ze(){ht.r||oe(ht.c),ht=ht.p}function q(n,e){n&&n.i&&(Yn.delete(n),n.i(e))}function U(n,e,t,r){if(n&&n.o){if(Yn.has(n))return;Yn.add(n),ht.c.push(()=>{Yn.delete(n),r&&(t&&n.d(1),r())}),n.o(e)}else r&&r()}var Ta={duration:0};function Vn(n,e,t,r){let i=e(n,t,{direction:"both"}),s=r?0:1,a=null,l=null,u=null,c;function d(){u&&ho(n,u)}function f(h,v){let F=h.b-s;return v*=Math.abs(F),{a:s,b:h.b,d:F,duration:v,start:h.start,end:h.start+v,group:h.group}}function p(h){let{delay:v=0,duration:F=300,easing:L=En,tick:J=Y,css:H}=i||Ta,N={start:lo()+v,b:h};h||(N.group=ht,ht.r+=1),"inert"in n&&(h?c!==void 0&&(n.inert=c):(c=n.inert,n.inert=!0)),a||l?l=N:(H&&(d(),u=Gn(n,s,h,F,v,L,H)),h&&J(0,1),a=f(N,F),dt(()=>_o(n,h,"start")),uo(Z=>{if(l&&Z>l.start&&(a=f(l,F),l=null,_o(n,a.b,"start"),H&&(d(),u=Gn(n,s,a.b,a.duration,0,L,i.css))),a){if(Z>=a.end)J(s=a.b,1-s),_o(n,a.b,"end"),l||(a.b?d():--a.group.r||oe(a.group.c)),a=null;else if(Z>=a.start){let ie=Z-a.start;s=a.a+a.d*L(ie/a.duration),J(s,1-s)}}return!!(a||l)}))}return{run(h){we(i)?Pa().then(()=>{i=i({direction:h?"in":"out"}),p(h)}):p(h)},end(){d(),a=l=null}}}function Je(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function ms(n,e){n.d(1),e.delete(n.key)}function ys(n,e,t,r,o,i,s,a,l,u,c,d){let f=n.length,p=i.length,h=f,v={};for(;h--;)v[n[h].key]=h;let F=[],L=new Map,J=new Map,H=[];for(h=p;h--;){let z=d(o,i,h),M=t(z),T=s.get(M);T?r&&H.push(()=>T.p(z,e)):(T=u(M,z),T.c()),L.set(M,F[h]=T),M in v&&J.set(M,Math.abs(h-v[M]))}let N=new Set,Z=new Set;function ie(z){q(z,1),z.m(a,c),s.set(z.key,z),c=z.first,p--}for(;f&&p;){let z=F[p-1],M=n[f-1],T=z.key,V=M.key;z===M?(c=z.first,f--,p--):L.has(V)?!s.has(T)||N.has(T)?ie(z):Z.has(V)?f--:J.get(T)>J.get(V)?(Z.add(T),ie(z)):(N.add(V),f--):(l(M,s),f--)}for(;f--;){let z=n[f];L.has(z.key)||l(z,s)}for(;p;)ie(F[p-1]);return oe(H),F}var Ca=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],Fa=new Set([...Ca]);function Ut(n,e,t){let r=n.$$.props[e];r!==void 0&&(n.$$.bound[r]=t,t(n.$$.ctx[r]))}function qe(n){n&&n.c()}function Ie(n,e,t){let{fragment:r,after_update:o}=n.$$;r&&r.m(e,t),dt(()=>{let i=n.$$.on_mount.map(ao).filter(we);n.$$.on_destroy?n.$$.on_destroy.push(...i):oe(i),n.$$.on_mount=[]}),o.forEach(dt)}function Pe(n,e){let t=n.$$;t.fragment!==null&&(ps(t.after_update),oe(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function La(n,e){n.$$.dirty[0]===-1&&(It.push(n),hs(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function W(n,e,t,r,o,i,s=null,a=[-1]){let l=jt;ft(n);let u=n.$$={fragment:null,ctx:[],props:i,update:Y,not_equal:o,bound:Wn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Wn(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};s&&s(u.root);let c=!1;if(u.ctx=t?t(n,e.props||{},(d,f,...p)=>{let h=p.length?p[0]:f;return u.ctx&&o(u.ctx[d],u.ctx[d]=h)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](h),c&&La(n,d)),f}):[],u.update(),c=!0,oe(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){ls();let d=fs(e.target);u.fragment&&u.fragment.l(d),d.forEach(A)}else u.fragment&&u.fragment.c();e.intro&&q(n.$$.fragment),Ie(n,e.target,e.anchor),us(),Hn()}ft(l)}var Ra;typeof HTMLElement=="function"&&(Ra=class extends HTMLElement{constructor(e,t,r){super();ge(this,"$$ctor");ge(this,"$$s");ge(this,"$$c");ge(this,"$$cn",!1);ge(this,"$$d",{});ge(this,"$$r",!1);ge(this,"$$p_d",{});ge(this,"$$l",{});ge(this,"$$l_u",new Map);this.$$ctor=e,this.$$s=t,r&&this.attachShadow({mode:"open"})}addEventListener(e,t,r){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(t),this.$$c){let o=this.$$c.$on(e,t);this.$$l_u.set(t,o)}super.addEventListener(e,t,r)}removeEventListener(e,t,r){if(super.removeEventListener(e,t,r),this.$$c){let o=this.$$l_u.get(t);o&&(o(),this.$$l_u.delete(t))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let e=function(i){return()=>{let s;return{c:function(){s=b("slot"),i!=="default"&&P(s,"name",i)},m:function(u,c){I(u,s,c)},d:function(u){u&&A(s)}}}};if(await Promise.resolve(),!this.$$cn)return;let t={},r=ds(this);for(let i of this.$$s)i in r&&(t[i]=[e(i)]);for(let i of this.attributes){let s=this.$$g_p(i.name);s in this.$$d||(this.$$d[s]=go(s,i.value,this.$$p_d,"toProp"))}this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:t,$$scope:{ctx:[]}}});let o=()=>{this.$$r=!0;for(let i in this.$$p_d)if(this.$$d[i]=this.$$c.$$.ctx[this.$$c.$$.props[i]],this.$$p_d[i].reflect){let s=go(i,this.$$d[i],this.$$p_d,"toAttribute");s==null?this.removeAttribute(this.$$p_d[i].attribute||i):this.setAttribute(this.$$p_d[i].attribute||i,s)}this.$$r=!1};this.$$c.$$.after_update.push(o),o();for(let i in this.$$l)for(let s of this.$$l[i]){let a=this.$$c.$on(i,s);this.$$l_u.set(s,a)}this.$$l={}}}attributeChangedCallback(e,t,r){var o;this.$$r||(e=this.$$g_p(e),this.$$d[e]=go(e,r,this.$$p_d,"toProp"),(o=this.$$c)==null||o.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{this.$$cn||(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(e){return Object.keys(this.$$p_d).find(t=>this.$$p_d[t].attribute===e||!this.$$p_d[t].attribute&&t.toLowerCase()===e)||e}});function go(n,e,t,r){var i;let o=(i=t[n])==null?void 0:i.type;if(e=o==="Boolean"&&typeof e!="boolean"?e!=null:e,!r||!t[n])return e;if(r==="toAttribute")switch(o){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e==null?null:e;default:return e}else switch(o){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}var D=class{constructor(){ge(this,"$$");ge(this,"$$set")}$destroy(){Pe(this,1),this.$destroy=Y}$on(e,t){if(!we(t))return Y;let r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{let o=r.indexOf(t);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!rs(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var _s="4";typeof window!="undefined"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(_s);var wo=require("obsidian");function st(n,e){return(0,wo.setIcon)(n,e),{update(t){(0,wo.setIcon)(n,t)}}}var Za=Lt(Ms());function Es(n){let e=n-1;return e*e*e+1}function Eo(n,{delay:e=0,duration:t=400,easing:r=Es,axis:o="y"}={}){let i=getComputedStyle(n),s=+i.opacity,a=o==="y"?"height":"width",l=parseFloat(i[a]),u=o==="y"?["top","bottom"]:["left","right"],c=u.map(L=>`${L[0].toUpperCase()}${L.slice(1)}`),d=parseFloat(i[`padding${c[0]}`]),f=parseFloat(i[`padding${c[1]}`]),p=parseFloat(i[`margin${c[0]}`]),h=parseFloat(i[`margin${c[1]}`]),v=parseFloat(i[`border${c[0]}Width`]),F=parseFloat(i[`border${c[1]}Width`]);return{delay:e,duration:t,easing:r,css:L=>`overflow: hidden;opacity: ${Math.min(L*20,1)*s};${a}: ${L*l}px;padding-${u[0]}: ${L*d}px;padding-${u[1]}: ${L*f}px;margin-${u[0]}: ${L*p}px;margin-${u[1]}: ${L*h}px;border-${u[0]}-width: ${L*v}px;border-${u[1]}-width: ${L*F}px;`}}function Ss(n){let e,t,r,o;return{c(){e=b("div"),P(e,"class","js-engine-message-delete-icon callout-icon"),P(e,"aria-label","remove"),P(e,"role","button"),P(e,"tabindex","0")},m(i,s){I(i,e,s),r||(o=[ye(e,"click",n[5]),ye(e,"keydown",n[6]),it(t=st.call(null,e,"x"))],r=!0)},p:Y,d(i){i&&A(e),r=!1,oe(o)}}}function Is(n){let e,t=n[0].message.content+"",r;return{c(){e=b("p"),r=G(t)},m(o,i){I(o,e,i),_(e,r)},p(o,i){i&1&&t!==(t=o[0].message.content+"")&&ue(r,t)},d(o){o&&A(e)}}}function Ps(n){let e,t,r=n[0].message.code+"",o;return{c(){e=b("pre"),t=b("code"),o=G(r),P(e,"class","language-none")},m(i,s){I(i,e,s),_(e,t),_(t,o)},p(i,s){s&1&&r!==(r=i[0].message.code+"")&&ue(o,r)},d(i){i&&A(e)}}}function Ts(n){let e,t,r,o=n[0].message.type+"",i,s,a,l,u=n[0].time.toISOString()+"",c,d,f,p,h=n[3]&&Cs(n);return{c(){e=b("div"),t=b("p"),r=G("Type: "),i=G(o),s=B(),a=b("p"),l=G("Time: "),c=G(u),d=B(),h&&h.c(),P(e,"class","js-engine-message-detail-content")},m(v,F){I(v,e,F),_(e,t),_(t,r),_(t,i),_(e,s),_(e,a),_(a,l),_(a,c),_(e,d),h&&h.m(e,null),p=!0},p(v,F){(!p||F&1)&&o!==(o=v[0].message.type+"")&&ue(i,o),(!p||F&1)&&u!==(u=v[0].time.toISOString()+"")&&ue(c,u),v[3]?h?h.p(v,F):(h=Cs(v),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},i(v){p||(v&&dt(()=>{p&&(f||(f=Vn(e,Eo,{duration:100},!0)),f.run(1))}),p=!0)},o(v){v&&(f||(f=Vn(e,Eo,{duration:100},!1)),f.run(0)),p=!1},d(v){v&&A(e),h&&h.d(),v&&f&&f.end()}}}function Cs(n){let e,t,r=n[0].source.name+"",o,i,s,a,l=n[0].source.id+"",u;return{c(){e=b("p"),t=G("Source Name: "),o=G(r),i=B(),s=b("p"),a=G("Source ID: "),u=G(l)},m(c,d){I(c,e,d),_(e,t),_(e,o),I(c,i,d),I(c,s,d),_(s,a),_(s,u)},p(c,d){d&1&&r!==(r=c[0].source.name+"")&&ue(o,r),d&1&&l!==(l=c[0].source.id+"")&&ue(u,l)},d(c){c&&(A(e),A(i),A(s))}}}function dl(n){let e,t,r,o,i,s,a=n[0].message.title+"",l,u,c,d,f,p,h,v,F,L,J,H,N,Z,ie,z,M,T,V=n[2]&&Ss(n),ce=n[0].message.content&&Is(n),k=n[0].message.code&&Ps(n),y=n[4]&&Ts(n);return{c(){e=b("div"),t=b("div"),r=b("div"),i=B(),s=b("span"),l=G(a),u=B(),V&&V.c(),c=B(),d=b("div"),ce&&ce.c(),f=B(),k&&k.c(),p=B(),h=b("div"),v=b("div"),F=b("span"),F.textContent="Details",L=B(),J=b("div"),Z=B(),y&&y.c(),P(r,"class","js-engine-message-icon callout-icon"),P(s,"class","js-engine-message-title"),P(t,"class","js-engine-message-header callout-title"),P(J,"class","js-engine-message-icon"),P(v,"class","js-engine-message-detail-row"),P(v,"aria-expanded",N=n[4]?"true":"false"),P(v,"role","button"),P(v,"tabindex","0"),P(h,"class","js-engine-message-detail"),P(d,"class","js-engine-message-content callout-content"),P(e,"class",ie="js-engine-message callout "+So(n[0].message.type)),P(e,"data-callout",z=n[0].message.type)},m(m,x){I(m,e,x),_(e,t),_(t,r),_(t,i),_(t,s),_(s,l),_(t,u),V&&V.m(t,null),_(e,c),_(e,d),ce&&ce.m(d,null),_(d,f),k&&k.m(d,null),_(d,p),_(d,h),_(h,v),_(v,F),_(v,L),_(v,J),_(h,Z),y&&y.m(h,null),M||(T=[it(o=st.call(null,r,Io(n[0].message.type))),it(H=st.call(null,J,n[4]?"chevron-down":"chevron-right")),ye(v,"click",n[7]),ye(v,"keydown",n[8])],M=!0)},p(m,[x]){o&&we(o.update)&&x&1&&o.update.call(null,Io(m[0].message.type)),x&1&&a!==(a=m[0].message.title+"")&&ue(l,a),m[2]?V?V.p(m,x):(V=Ss(m),V.c(),V.m(t,null)):V&&(V.d(1),V=null),m[0].message.content?ce?ce.p(m,x):(ce=Is(m),ce.c(),ce.m(d,f)):ce&&(ce.d(1),ce=null),m[0].message.code?k?k.p(m,x):(k=Ps(m),k.c(),k.m(d,p)):k&&(k.d(1),k=null),H&&we(H.update)&&x&16&&H.update.call(null,m[4]?"chevron-down":"chevron-right"),x&16&&N!==(N=m[4]?"true":"false")&&P(v,"aria-expanded",N),m[4]?y?(y.p(m,x),x&16&&q(y,1)):(y=Ts(m),y.c(),q(y,1),y.m(h,null)):y&&(Xe(),U(y,1,1,()=>{y=null}),Ze()),x&1&&ie!==(ie="js-engine-message callout "+So(m[0].message.type))&&P(e,"class",ie),x&1&&z!==(z=m[0].message.type)&&P(e,"data-callout",z)},i(m){q(y)},o(m){U(y)},d(m){m&&A(e),V&&V.d(),ce&&ce.d(),k&&k.d(),y&&y.d(),M=!1,oe(T)}}}function hl(n,e,t){let{messageWrapper:r}=e,{messageManager:o}=e,{showDeleteButton:i=!0}=e,{showMessageSource:s=!0}=e,a=!1,l=()=>o.removeMessage(r.uuid),u=f=>f.key===" "?o.removeMessage(r.uuid):void 0,c=()=>t(4,a=!a),d=f=>f.key===" "?t(4,a=!a):void 0;return n.$$set=f=>{"messageWrapper"in f&&t(0,r=f.messageWrapper),"messageManager"in f&&t(1,o=f.messageManager),"showDeleteButton"in f&&t(2,i=f.showDeleteButton),"showMessageSource"in f&&t(3,s=f.showMessageSource)},[r,o,i,s,a,l,u,c,d]}var Ao=class extends D{constructor(e){super(),W(this,e,hl,dl,j,{messageWrapper:0,messageManager:1,showDeleteButton:2,showMessageSource:3})}},Jt=Ao;function Fs(n,e,t){let r=n.slice();return r[4]=e[t][0],r[5]=e[t][1],r[6]=e,r[7]=t,r}function Os(n){let e;return{c(){e=b("p"),e.textContent="None"},m(t,r){I(t,e,r)},p:Y,d(t){t&&A(e)}}}function Ls(n){let e,t,r;function o(s){n[3](s,n[5],n[6],n[7])}let i={messageManager:n[0]};return n[5]!==void 0&&(i.messageWrapper=n[5]),e=new Jt({props:i}),Ne.push(()=>Ut(e,"messageWrapper",o)),{c(){qe(e.$$.fragment)},m(s,a){Ie(e,s,a),r=!0},p(s,a){n=s;let l={};a&1&&(l.messageManager=n[0]),!t&&a&2&&(t=!0,l.messageWrapper=n[5],Bt(()=>t=!1)),e.$set(l)},i(s){r||(q(e.$$.fragment,s),r=!0)},o(s){U(e.$$.fragment,s),r=!1},d(s){Pe(e,s)}}}function pl(n){let e,t,r,o,i=Je(n[1]),s=[];for(let u=0;u<i.length;u+=1)s[u]=Ls(Fs(n,i,u));let a=u=>U(s[u],1,1,()=>{s[u]=null}),l=null;return i.length||(l=Os(n)),{c(){e=b("h2"),e.textContent="Messages",t=B(),r=b("div");for(let u=0;u<s.length;u+=1)s[u].c();l&&l.c()},m(u,c){I(u,e,c),I(u,t,c),I(u,r,c);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(r,null);l&&l.m(r,null),o=!0},p(u,[c]){if(c&3){i=Je(u[1]);let d;for(d=0;d<i.length;d+=1){let f=Fs(u,i,d);s[d]?(s[d].p(f,c),q(s[d],1)):(s[d]=Ls(f),s[d].c(),q(s[d],1),s[d].m(r,null))}for(Xe(),d=i.length;d<s.length;d+=1)a(d);Ze(),!i.length&&l?l.p(u,c):i.length?l&&(l.d(1),l=null):(l=Os(u),l.c(),l.m(r,null))}},i(u){if(!o){for(let c=0;c<i.length;c+=1)q(s[c]);o=!0}},o(u){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)U(s[c]);o=!1},d(u){u&&(A(e),A(t),A(r)),qt(s,u),l&&l.d()}}}function ml(n,e,t){let r,{messageManager:o}=e,i=o.messages;is(n,i,a=>t(1,r=a));function s(a,l,u,c){u[c][1]=a,i.set(r)}return n.$$set=a=>{"messageManager"in a&&t(0,o=a.messageManager)},[o,r,i,s]}var Po=class extends D{constructor(e){super(),W(this,e,ml,pl,j,{messageManager:0})}},Rs=Po;var Qn=class extends Ds.Modal{constructor(t,r){super(t);this.plugin=r}onOpen(){this.contentEl.empty(),this.component&&this.component.$destroy(),this.component=new Rs({target:this.contentEl,props:{messageManager:this.plugin.messageManager}})}onClose(){this.contentEl.empty(),this.component&&this.component.$destroy()}};function Ns(n){return new To(n)}var To=class{constructor(e){this.value=e,this.subscriberCounter=0,this.subscribers=new Map}set(e){this.value!==e&&(this.value=e,this.notify())}update(e){this.set(e(this.value))}get(){return this.value}subscribe(e,t){let r=this.subscriberCounter;return this.subscriberCounter+=1,this.subscribers.set(r,e),e(this.value),()=>{this.subscribers.delete(r)}}notify(){for(let e of this.subscribers.values())e(this.value)}};function qs(n){return[...n]}var yl=["error","warning","success","tip","info"];function So(n){return`js-engine-message-mod-${n}`}function Io(n){var t;let e=new Map;return e.set("error","zap"),e.set("warning","alert-triangle"),e.set("success","check"),e.set("tip","flame"),e.set("info","info"),(t=e.get(n))!=null?t:"info"}function _l(n){return`js-engine-message-indicator-mod-${n}`}var Xn=class{constructor(e,t,r,o){this.type=e,this.title=t,this.content=r,this.code=o}},In=class{constructor(e,t){this.message=e,this.source=t,this.uuid=self.crypto.randomUUID(),this.time=(0,Kn.moment)()}},Zn=class{constructor(e,t){this.app=e,this.plugin=t,this.messages=Ns(new Map)}initStatusBarItem(){this.messageDisplay=new Qn(this.app,this.plugin),this.statusBarItem=this.plugin.addStatusBarItem(),this.statusBarItem.addClass("mod-clickable"),this.statusBarItem.addEventListener("click",()=>{var e;(e=this.messageDisplay)==null||e.open()}),this.updateStatusBarItem(),this.messages.subscribe(e=>{this.updateStatusBarItem()})}addMessage(e,t){let r=new In(e,t);return this.messages.get().set(r.uuid,r),this.messages.notify(),r}removeMessage(e){this.messages.get().delete(e),this.messages.notify()}updateStatusBarItem(){if(!this.statusBarItem)return;this.statusBarItem.empty();let e=this.statusBarItem.createEl("div");(0,Kn.setIcon)(e,"message-square");let t=this.statusBarItem.createEl("span");t.addClass("js-engine-message-counter"),t.innerText=this.messages.get().size.toString();let r=new Set(Array.from(this.messages.get().values()).map(o=>o.message.type));for(let o of yl)if(r.has(o)){t.addClass(_l(o));break}r.size===0&&t.addClass("js-engine-message-indicator-mod-info")}getMessagesFromSource(e){let t=this.messages.get();return qs(t.values()).filter(r=>r.source.id===e.id)}};var Gt=class{constructor(e,t){this._render=e,this.initialArgs=t}async refresh(...e){var t;(t=this.renderer)==null||t.render(await this._render(...e))}initialRender(){this.refresh(...this.initialArgs)}setRenderer(e){this.renderer=e}};var Ht=class{constructor(e,t,r,o){this.plugin=e,this.container=t,this.sourcePath=r,this.component=o}async render(e){if(e!=null){if(this.container.empty(),typeof e=="string"){this.container.innerText=e;return}if(e instanceof Dt&&(e=e.toMarkdown()),e instanceof bt){console.log(e.content),await e.render(this.container,this.sourcePath,this.component);return}if(e instanceof HTMLElement){this.container.append(e);return}if(e instanceof In){new Jt({target:this.container,props:{messageWrapper:e,messageManager:this.plugin.messageManager,showDeleteButton:!1,showMessageSource:!1}});return}if(e instanceof Gt){e.setRenderer(this),e.initialRender();return}this.container.innerText=JSON.stringify(e)}}};var $n=class extends wt.MarkdownRenderChild{constructor(t,r,o,i){super(t);this.plugin=r,this.content=o,this.ctx=i}getExecutionFile(){if(!this.ctx.sourcePath)return;let t=this.plugin.app.vault.getAbstractFileByPath(this.ctx.sourcePath);if(t&&t instanceof wt.TFile)return t}buildExecutionContext(){console.log(this.ctx);let t=this.getExecutionFile();return{file:t,metadata:this.plugin.app.metadataCache.getFileCache(t),line:0}}async tryRun(t){return this.plugin.jsEngine.execute({code:this.content,context:t,contextOverrides:{},component:this,container:this.containerEl})}async renderResults(t){let r=this.buildExecutionContext();this.jsExecution=await this.tryRun(r);let o=this.jsExecution.result;await new Ht(this.plugin,t,this.ctx.sourcePath,this).render(o)}renderExecutionStats(t){let r=new wt.Menu;r.addItem(i=>{i.setTitle("Info"),i.setIcon("info"),i.onClick(()=>{var s;(s=this.jsExecution)==null||s.openStatsModal()})}),r.addItem(i=>{i.setTitle("Rerun"),i.setIcon("rotate-ccw"),i.onClick(()=>{this.render()})});let o=t.createDiv();o.addClass("js-engine-execution-stats-button"),o.addEventListener("click",i=>{r.showAtMouseEvent(i)}),(0,wt.setIcon)(o,"info")}async render(){var t,r;this.containerEl.empty(),this.containerEl.hasClass("js-engine-execution-render-child")||this.containerEl.addClass("js-engine-execution-render-child");try{await this.renderResults(this.containerEl),this.renderExecutionStats(this.containerEl)}catch(o){this.containerEl.innerText=o instanceof Error?(r=(t=o.stack)==null?void 0:t.toString())!=null?r:"":o,this.containerEl.addClass("mod-warning")}}async onload(){console.log("load"),await this.render()}onunload(){console.log("unload")}};var er=class{constructor(e){this.apiInstance=e}createBuilder(){return new Dt}create(e){return new bt(e)}createText(e){return new Qe(e,!1,!1,!1)}createBoldText(e){return new Qe(e,!0,!1,!1)}createCursiveText(e){return new Qe(e,!1,!0,!1)}createUnderlinedText(e){return new Qe(e,!1,!1,!0)}createCode(e){return new gn(e)}createParagraph(e){return new bn(e)}createHeading(e,t){return new vn(e,t)}createBlockQuote(){return new xn}createCallout(e,t,r=""){return new Mn(e,t,r)}createCodeBlock(e,t){return new wn(e,t)}createTable(e,t){return new kn(e,t)}};var tr=class{constructor(e){this.apiInstance=e,this.messageManager=e.plugin.messageManager}createMessage(e,t,r,o=""){return this.messageManager.addMessage(new Xn(e,t,r,o),this.apiInstance.instanceId)}getMessageById(e){return this.messageManager.messages.get().get(e)}getMessagesForInstance(){return this.messageManager.getMessagesFromSource(this.apiInstance.instanceId)}};var Zs=Lt(ar()),Ks=Lt(Do()),$s=Lt(Pn()),to=Lt(qo()),ea=Lt(Lo());var Yo={};$o(Yo,{AsyncStream:()=>$i,InvalidArgumentError:()=>te,LengthError:()=>Re,Stream:()=>xt,infinite:()=>vt,math:()=>Il,multi:()=>Pl,reduce:()=>hr,set:()=>Tl,single:()=>Qt,summary:()=>Cl,transform:()=>Fl});var te=class extends Error{},Re=class extends Error{};var Pt=function(n,e,t,r){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(c){try{u(r.next(c))}catch(d){s(d)}}function l(c){try{u(r.throw(c))}catch(d){s(d)}}function u(c){c.done?i(c.value):o(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})},at=function(n){return this instanceof at?(this.v=n,this):new at(n)},Ws=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),o,i=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(f){r[f]&&(o[f]=function(p){return new Promise(function(h,v){i.push([f,p,h,v])>1||a(f,p)})})}function a(f,p){try{l(r[f](p))}catch(h){d(i[0][3],h)}}function l(f){f.value instanceof at?Promise.resolve(f.value.v).then(u,c):d(i[0][2],f)}function u(f){a("next",f)}function c(f){a("throw",f)}function d(f,p){f(p),i.shift(),i.length&&a(i[0][0],i[0][1])}},he;(function(n){n[n.SHORTEST=0]="SHORTEST",n[n.LONGEST=1]="LONGEST",n[n.STRICT_EQUAL=2]="STRICT_EQUAL"})(he||(he={}));function*Mt(n,e,...t){if(t.length===0)return;let r=[];for(let o of t)r.push(Tn(o));e:for(;;){let o=Qt.map(r,l=>l.next()),i=[],s=!0,a=!1;for(let l of o){let u;l.done?(s=!1,u=e):(a=!0,u=l.value),i.push(u)}if(!s&&a)switch(n){case he.SHORTEST:break e;case he.STRICT_EQUAL:throw new Re("Iterators must have equal lengths")}if(!a)break;yield i}}function kt(n,e,...t){return Ws(this,arguments,function*(){if(t.length===0)return yield at(void 0);let o=[];for(let i of t)o.push(Cn(i));e:for(;;){let i=[];for(let u of o){let c=yield at(u.next());i.push(c)}let s=[],a=!0,l=!1;for(let u of i){let c;u.done?(a=!1,c=e):(l=!0,c=u.value),s.push(c)}if(!a&&l)switch(n){case he.SHORTEST:break e;case he.STRICT_EQUAL:throw new Re("Iterators must have equal lengths")}if(!l)break;yield yield at(s)}})}var Tt=class{constructor(){this.addedMap=new Map,this.deletedMap=new Map}addUsage(e,t){this.addedMap.has(e)||this.addedMap.set(e,new Map);let r=this.addedMap.get(e);r.has(t)||r.set(t,0),r.set(t,r.get(t)+1)}deleteUsage(e){this.deletedMap.has(e)?this.deletedMap.set(e,this.deletedMap.get(e)+1):this.deletedMap.set(e,1)}getOwnersCount(e){var t,r;let o=(t=this.deletedMap.get(e))!==null&&t!==void 0?t:0;return xt.of((r=this.addedMap.get(e))!==null&&r!==void 0?r:new Map).map(i=>i[1]).filter(i=>i>o).toValue(i=>i+1,0)}getUsagesCount(e,t=1){var r,o;let i=(r=this.deletedMap.get(e))!==null&&r!==void 0?r:0,s=xt.of((o=this.addedMap.get(e))!==null&&o!==void 0?o:new Map).map(a=>a[1]).map(a=>a-i).filter(a=>a>0).toArray();for(;s.length>t;){let a=hr.toMin(s);s=xt.of(s).map(l=>l-a).filter(l=>l>0).toArray()}return hr.toSum(s)}},pe=class{},fr=class{constructor(e,t){this.related=[],this.positions=[],this.cache=new Map,this.lastCacheIndex=0,this.isValid=!0,this.iterator=e;for(let r=0;r<t;++r)this.related.push(new Bo(this,r)),this.positions.push(0);this.cacheNextValue()}current(e){let t=this.getPosition(e);return this.cache.get(t)}next(e){let[t,r,o]=[this.getPosition(e),Math.min(...this.positions),Math.max(...this.positions)];t===o&&this.cacheNextValue(),this.positions[e.getId()]++,r<Math.min(...this.positions)&&this.cache.delete(r)}valid(e){return this.getPosition(e)<this.lastCacheIndex||this.isValid}getRelatedIterables(){return this.related}cacheNextValue(){let e=this.iterator.next();e.done||this.cache.set(this.lastCacheIndex++,e.value),this.isValid=!e.done}getPosition(e){return this.positions[e.getId()]}},Bo=class{constructor(e,t){this.parent=e,this.id=t}getId(){return this.id}valid(){return this.parent.valid(this)}next(){let e={value:this.current(),done:!this.valid()};return e.done||this.parent.next(this),e}current(){return this.parent.valid(this)?this.parent.current(this):void 0}*[Symbol.iterator](){for(;this.parent.valid(this);)yield this.parent.current(this),this.parent.next(this)}},dr=class{constructor(e,t){this.related=[],this.positions=[],this.cache=new Map,this.lastCacheIndex=0,this.isValid=!0,this.isFirstIteration=!0,this.iterator=e;for(let r=0;r<t;++r)this.related.push(new Uo(this,r)),this.positions.push(0)}current(e){return Pt(this,void 0,void 0,function*(){this.isFirstIteration&&(yield this.cacheNextValue());let t=this.getPosition(e);return this.cache.get(t)})}next(e){return Pt(this,void 0,void 0,function*(){let[t,r,o]=[this.getPosition(e),Math.min(...this.positions),Math.max(...this.positions)];t===o&&(yield this.cacheNextValue()),this.positions[e.getId()]++,r<Math.min(...this.positions)&&this.cache.delete(r)})}valid(e){return Pt(this,void 0,void 0,function*(){return this.isFirstIteration&&(yield this.cacheNextValue()),this.getPosition(e)<this.lastCacheIndex||this.isValid})}getRelatedIterables(){return this.related}cacheNextValue(){return Pt(this,void 0,void 0,function*(){let e=yield this.iterator.next();e.done||this.cache.set(this.lastCacheIndex++,e.value),this.isFirstIteration=!1,this.isValid=!e.done})}getPosition(e){return this.positions[e.getId()]}},Uo=class{constructor(e,t){this.parent=e,this.id=t}getId(){return this.id}valid(){return Pt(this,void 0,void 0,function*(){return yield this.parent.valid(this)})}next(){return Pt(this,void 0,void 0,function*(){let e={value:yield this.current(),done:!(yield this.valid())};return e.done||(yield this.parent.next(this)),e})}current(){return Pt(this,void 0,void 0,function*(){return(yield this.parent.valid(this))?yield this.parent.current(this):void 0})}[Symbol.asyncIterator](){return Ws(this,arguments,function*(){for(;yield at(this.parent.valid(this));)yield yield at(yield at(this.parent.current(this))),yield at(this.parent.next(this))})}};var Fn=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(s){return new Promise(function(a,l){s=n[i](s),o(a,l,s.done,s.value)})}}function o(i,s,a,l){Promise.resolve(l).then(function(u){i({value:u,done:a})},s)}},ve=function(n){return this instanceof ve?(this.v=n,this):new ve(n)},On=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),o,i=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(f){r[f]&&(o[f]=function(p){return new Promise(function(h,v){i.push([f,p,h,v])>1||a(f,p)})})}function a(f,p){try{l(r[f](p))}catch(h){d(i[0][3],h)}}function l(f){f.value instanceof ve?Promise.resolve(f.value.v).then(u,c):d(i[0][2],f)}function u(f){a("next",f)}function c(f){a("throw",f)}function d(f,p){f(p),i.shift(),i.length&&a(i[0][0],i[0][1])}};function*Xt(...n){for(let e of Mt(he.SHORTEST,void 0,...n))yield e}function Zt(...n){return On(this,arguments,function*(){var t,r,o,i;try{for(var s=!0,a=Fn(kt(he.SHORTEST,void 0,...n)),l;l=yield ve(a.next()),t=l.done,!t;){i=l.value,s=!1;try{yield yield ve(i)}finally{s=!0}}}catch(u){r={error:u}}finally{try{!s&&!t&&(o=a.return)&&(yield ve(o.call(a)))}finally{if(r)throw r.error}}})}function*pr(n,...e){for(let t of Mt(he.LONGEST,n,...e))yield t}function mr(n,...e){return On(this,arguments,function*(){var r,o,i,s;try{for(var a=!0,l=Fn(kt(he.LONGEST,n,...e)),u;u=yield ve(l.next()),r=u.done,!r;){s=u.value,a=!1;try{yield yield ve(s)}finally{a=!0}}}catch(c){o={error:c}}finally{try{!a&&!r&&(i=l.return)&&(yield ve(i.call(l)))}finally{if(o)throw o.error}}})}function*yr(...n){for(let e of Mt(he.LONGEST,void 0,...n))yield e}function _r(...n){return On(this,arguments,function*(){var t,r,o,i;try{for(var s=!0,a=Fn(kt(he.LONGEST,void 0,...n)),l;l=yield ve(a.next()),t=l.done,!t;){i=l.value,s=!1;try{yield yield ve(i)}finally{s=!0}}}catch(u){r={error:u}}finally{try{!s&&!t&&(o=a.return)&&(yield ve(o.call(a)))}finally{if(r)throw r.error}}})}function*Kt(...n){for(let e of Mt(he.STRICT_EQUAL,void 0,...n))yield e}function $t(...n){return On(this,arguments,function*(){var t,r,o,i;try{for(var s=!0,a=Fn(kt(he.STRICT_EQUAL,void 0,...n)),l;l=yield ve(a.next()),t=l.done,!t;){i=l.value,s=!1;try{yield yield ve(i)}finally{s=!0}}}catch(u){r={error:u}}finally{try{!s&&!t&&(o=a.return)&&(yield ve(o.call(a)))}finally{if(r)throw r.error}}})}function*gr(...n){for(let e of n)for(let t of S(e))yield t}function vr(...n){return On(this,arguments,function*(){var t,r,o,i;for(let u of n)try{for(var s=!0,a=(r=void 0,Fn(E(u))),l;l=yield ve(a.next()),t=l.done,!t;){i=l.value,s=!1;try{yield yield ve(i)}finally{s=!0}}}catch(c){r={error:c}}finally{try{!s&&!t&&(o=a.return)&&(yield ve(o.call(a)))}finally{if(r)throw r.error}}})}var Se=function(n,e,t,r){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(c){try{u(r.next(c))}catch(d){s(d)}}function l(c){try{u(r.throw(c))}catch(d){s(d)}}function u(c){c.done?i(c.value):o(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})},br=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(s){return new Promise(function(a,l){s=n[i](s),o(a,l,s.done,s.value)})}}function o(i,s,a,l){Promise.resolve(l).then(function(u){i({value:u,done:a})},s)}};function ze(n,e,t){let r=t;for(let o of S(n))r=e(r,o);return r}function Be(n,e,t){var r,o,i,s;return Se(this,void 0,void 0,function*(){let a=t;try{for(var l=!0,u=br(E(n)),c;c=yield u.next(),r=c.done,!r;){s=c.value,l=!1;try{a=yield e(a,s)}finally{l=!0}}}catch(d){o={error:d}}finally{try{!l&&!r&&(i=u.return)&&(yield i.call(u))}finally{if(o)throw o.error}}return a})}function wr(n){let[e,t]=ze(n,(r,o)=>{let[i,s]=r;return[i+1,s+Number(o)]},[0,0]);return e?t/e:void 0}function xr(n){return Se(this,void 0,void 0,function*(){let[e,t]=yield Be(n,(r,o)=>{let[i,s]=r;return[i+1,s+Number(o)]},[0,0]);return e?t/e:void 0})}function Mr(n,e){return e!==void 0?ze(n,(t,r)=>e(r)>e(t!=null?t:r)?r:t!=null?t:r):ze(n,(t,r)=>{let o=t!=null?t:r,i=r;return o>=i?o:i})}function kr(n,e){return Se(this,void 0,void 0,function*(){return e!==void 0?yield Be(n,(t,r)=>Se(this,void 0,void 0,function*(){return(yield e(r))>(yield e(t!=null?t:r))?r:t!=null?t:r})):yield Be(n,(t,r)=>{let o=t!=null?t:r,i=r;return o>=i?o:i})})}function Er(n,e){return e!==void 0?ze(n,(t,r)=>e(r)<e(t!=null?t:r)?r:t!=null?t:r):ze(n,(t,r)=>{let o=t!=null?t:r,i=r;return o<=i?o:i})}function Ar(n,e){return Se(this,void 0,void 0,function*(){return e!==void 0?yield Be(n,(t,r)=>Se(this,void 0,void 0,function*(){return(yield e(r))<(yield e(t!=null?t:r))?r:t!=null?t:r})):yield Be(n,(t,r)=>{let o=t!=null?t:r,i=r;return o<=i?o:i})})}function Ln(n,e){let t=e!==void 0?e:r=>r;return ze(n,(r,o)=>{var i,s,a,l;return r=r,[t(o)<=t((i=r[0])!==null&&i!==void 0?i:o)?o:(s=r[0])!==null&&s!==void 0?s:o,t(o)>=t((a=r[1])!==null&&a!==void 0?a:o)?o:(l=r[1])!==null&&l!==void 0?l:o]},[void 0,void 0])}function Rn(n,e){return Se(this,void 0,void 0,function*(){let t=e!==void 0?e:r=>r;return yield Be(n,(r,o)=>Se(this,void 0,void 0,function*(){var i,s,a,l;return r=r,[(yield t(o))<=(yield t((i=r[0])!==null&&i!==void 0?i:o))?o:(s=r[0])!==null&&s!==void 0?s:o,(yield t(o))>=(yield t((a=r[1])!==null&&a!==void 0?a:o))?o:(l=r[1])!==null&&l!==void 0?l:o]}),[void 0,void 0])})}function Sr(n){let[e,t]=Ln(Et(n,r=>Number(r)));return(t!=null?t:0)-(e!=null?e:0)}function Ir(n){return Se(this,void 0,void 0,function*(){let[e,t]=yield Rn(ut(n,r=>Number(r)));return(t!=null?t:0)-(e!=null?e:0)})}function Pr(n){return ze(n,(e,t)=>e+Number(t),0)}function Tr(n){return Se(this,void 0,void 0,function*(){return yield Be(n,(e,t)=>e+Number(t),0)})}function Cr(n){return ze(n,(e,t)=>(e!=null?e:1)*t)}function Fr(n){return Se(this,void 0,void 0,function*(){return yield Be(n,(e,t)=>(e!=null?e:1)*t)})}function Ct(n){switch(!0){case n instanceof Array:return n.length;case lt(n):return n.length;case n instanceof Set:return n.size;case n instanceof Map:return n.size}return ze(n,e=>e+1,0)}function en(n){return Se(this,void 0,void 0,function*(){switch(!0){case n instanceof Array:case lt(n):case n instanceof Set:case n instanceof Map:return Ct(n)}return yield Be(n,e=>e+1,0)})}function Or(n){for(let e of S(n))return e;throw new Re("Collection is empty")}function Lr(n){var e,t,r,o;return Se(this,void 0,void 0,function*(){try{for(var i=!0,s=br(E(n)),a;a=yield s.next(),e=a.done,!e;){o=a.value,i=!1;try{return o}finally{i=!0}}}catch(l){t={error:l}}finally{try{!i&&!e&&(r=s.return)&&(yield r.call(s))}finally{if(t)throw t.error}}throw new Re("Collection is empty")})}function Rr(n){let e=!0,t;for(let r of S(n))t=r,e=!1;if(e)throw new Re("Collection is empty");return t}function Dr(n){var e,t,r,o;return Se(this,void 0,void 0,function*(){let i=!0,s;try{for(var a=!0,l=br(E(n)),u;u=yield l.next(),e=u.done,!e;){o=u.value,a=!1;try{s=o,i=!1}finally{a=!0}}}catch(c){t={error:c}}finally{try{!a&&!e&&(r=l.return)&&(yield r.call(l))}finally{if(t)throw t.error}}if(i)throw new Re("Collection is empty");return s})}function Nr(n){let e=pe,t=pe;for(let r of S(n))e===pe&&(e=r),t=r;if(e===pe)throw new Re("Collection is empty");return[e,t]}function qr(n){var e,t,r,o;return Se(this,void 0,void 0,function*(){let i=pe,s=pe;try{for(var a=!0,l=br(E(n)),u;u=yield l.next(),e=u.done,!e;){o=u.value,a=!1;try{let c=o;i===pe&&(i=c),s=c}finally{a=!0}}}catch(c){t={error:c}}finally{try{!a&&!e&&(r=l.return)&&(yield r.call(l))}finally{if(t)throw t.error}}if(i===pe)throw new Re("Collection is empty");return[i,s]})}var $e=function(n,e,t,r){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(c){try{u(r.next(c))}catch(d){s(d)}}function l(c){try{u(r.throw(c))}catch(d){s(d)}}function u(c){c.done?i(c.value):o(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})},pt=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(s){return new Promise(function(a,l){s=n[i](s),o(a,l,s.done,s.value)})}}function o(i,s,a,l){Promise.resolve(l).then(function(u){i({value:u,done:a})},s)}};function jr(n,e){for(let t of S(n))if(!e(t))return!1;return!0}function Wr(n,e){var t,r,o,i;return $e(this,void 0,void 0,function*(){try{for(var s=!0,a=pt(E(n)),l;l=yield a.next(),t=l.done,!t;){i=l.value,s=!1;try{if(!(yield e(i)))return!1}finally{s=!0}}}catch(u){r={error:u}}finally{try{!s&&!t&&(o=a.return)&&(yield o.call(a))}finally{if(r)throw r.error}}return!0})}function zr(n){let e=new Set;for(let t of S(n)){if(e.has(t))return!1;e.add(t)}return!0}function Br(n){var e,t,r,o;return $e(this,void 0,void 0,function*(){let i=new Set;try{for(var s=!0,a=pt(E(n)),l;l=yield a.next(),e=l.done,!e;){o=l.value,s=!1;try{let u=o;if(i.has(u))return!1;i.add(u)}finally{s=!0}}}catch(u){t={error:u}}finally{try{!s&&!e&&(r=a.return)&&(yield r.call(a))}finally{if(t)throw t.error}}return!0})}function Ur(n,e){for(let t of S(n))if(e(t))return!0;return!1}function Jr(n,e){var t,r,o,i;return $e(this,void 0,void 0,function*(){try{for(var s=!0,a=pt(E(n)),l;l=yield a.next(),t=l.done,!t;){i=l.value,s=!1;try{if(yield e(i))return!0}finally{s=!0}}}catch(u){r={error:u}}finally{try{!s&&!t&&(o=a.return)&&(yield o.call(a))}finally{if(r)throw r.error}}return!1})}function Gr(n,e,t){if(e<0)return!1;t===void 0&&(t=o=>!!o);let r=0;for(let o of S(n))if(t(o)&&(r++,r>e))return!1;return r===e}function Hr(n,e,t){var r,o,i,s;return $e(this,void 0,void 0,function*(){if(e<0)return!1;t===void 0&&(t=d=>!!d);let a=0;try{for(var l=!0,u=pt(E(n)),c;c=yield u.next(),r=c.done,!r;){s=c.value,l=!1;try{if((yield t(s))&&(a++,a>e))return!1}finally{l=!0}}}catch(d){o={error:d}}finally{try{!l&&!r&&(i=u.return)&&(yield i.call(u))}finally{if(o)throw o.error}}return a===e})}function zs(n){for(let e of S(n))return!1;return!0}function Bs(n){var e,t,r,o;return $e(this,void 0,void 0,function*(){try{for(var i=!0,s=pt(E(n)),a;a=yield s.next(),e=a.done,!e;){o=a.value,i=!1;try{let l=o;return!1}finally{i=!0}}}catch(l){t={error:l}}finally{try{!i&&!e&&(r=s.return)&&(yield r.call(s))}finally{if(t)throw t.error}}return!0})}function De(n){return n==null?!1:typeof n[Symbol.iterator]=="function"}function mt(n){return n==null?!1:typeof n[Symbol.asyncIterator]=="function"}function Ye(n){return n==null?!1:n.next!==void 0&&typeof n.next=="function"}function Yr(n){for(let[e,t]of yt(S(n)))if(e<t)return!1;return!0}function Vr(n){var e,t,r,o;return $e(this,void 0,void 0,function*(){try{for(var i=!0,s=pt(Ft(E(n))),a;a=yield s.next(),e=a.done,!e;){o=a.value,i=!1;try{let[l,u]=o;if(l<u)return!1}finally{i=!0}}}catch(l){t={error:l}}finally{try{!i&&!e&&(r=s.return)&&(yield r.call(s))}finally{if(t)throw t.error}}return!0})}function Qr(n){for(let[e,t]of yt(S(n)))if(e>t)return!1;return!0}function Xr(n){var e,t,r,o;return $e(this,void 0,void 0,function*(){try{for(var i=!0,s=pt(Ft(E(n))),a;a=yield s.next(),e=a.done,!e;){o=a.value,i=!1;try{let[l,u]=o;if(l>u)return!1}finally{i=!0}}}catch(l){t={error:l}}finally{try{!i&&!e&&(r=s.return)&&(yield r.call(s))}finally{if(t)throw t.error}}return!0})}function lt(n){return typeof n=="string"||n instanceof String}function Zr(n,e){for(let t of S(n))if(e(t))return!1;return!0}function Kr(n,e){var t,r,o,i;return $e(this,void 0,void 0,function*(){try{for(var s=!0,a=pt(E(n)),l;l=yield a.next(),t=l.done,!t;){i=l.value,s=!1;try{if(yield e(i))return!1}finally{s=!0}}}catch(u){r={error:u}}finally{try{!s&&!t&&(o=a.return)&&(yield o.call(a))}finally{if(r)throw r.error}}return!0})}function $r(...n){try{for(let e of Kt(...n))for(let[t,r]of yt(e))if(t!==r)return!1}catch(e){return!1}return!0}function ei(...n){var e,t,r,o;return $e(this,void 0,void 0,function*(){try{try{for(var i=!0,s=pt($t(...n)),a;a=yield s.next(),e=a.done,!e;){o=a.value,i=!1;try{let l=o;for(let[u,c]of yt(l))if(u!==c)return!1}finally{i=!0}}}catch(l){t={error:l}}finally{try{!i&&!e&&(r=s.return)&&(yield r.call(s))}finally{if(t)throw t.error}}}catch(l){return!1}return!0})}function ti(...n){if(n.length<=1)return!0;let e=n.map(t=>Ct(t));return new Set(e).size===1}function ni(...n){return $e(this,void 0,void 0,function*(){if(n.length<=1)return!0;let e=yield ut(n,t=>$e(this,void 0,void 0,function*(){return yield en(t)}));return new Set(yield et(e)).size===1})}var Go=function(n,e,t,r){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(c){try{u(r.next(c))}catch(d){s(d)}}function l(c){try{u(r.throw(c))}catch(d){s(d)}}function u(c){c.done?i(c.value):o(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})},ct=function(n){return this instanceof ct?(this.v=n,this):new ct(n)},Jo=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),o,i=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(f){r[f]&&(o[f]=function(p){return new Promise(function(h,v){i.push([f,p,h,v])>1||a(f,p)})})}function a(f,p){try{l(r[f](p))}catch(h){d(i[0][3],h)}}function l(f){f.value instanceof ct?Promise.resolve(f.value.v).then(u,c):d(i[0][2],f)}function u(f){a("next",f)}function c(f){a("throw",f)}function d(f,p){f(p),i.shift(),i.length&&a(i[0][0],i[0][1])}},ri=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(s){return new Promise(function(a,l){s=n[i](s),o(a,l,s.done,s.value)})}}function o(i,s,a,l){Promise.resolve(l).then(function(u){i({value:u,done:a})},s)}};function S(n){if(De(n))return n;if(Ye(n))return{[Symbol.iterator](){return n}};if(typeof n=="object"&&n!==null)return function*(){for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&(yield[e,n[e]])}();throw new te("Given collection is not iterable or iterator.")}function E(n){if(mt(n))return n;if(Ye(n))return{[Symbol.asyncIterator](){return Jo(this,arguments,function*(){for(;;){let t=yield ct(n.next());if(t.done)return yield ct(void 0);yield yield ct(t.value)}})}};if(typeof n=="object"&&n!==null&&(n=S(n)),De(n))return{[Symbol.asyncIterator](){return Jo(this,arguments,function*(){for(let t of n)yield yield ct(t)})}};throw new te("Given collection is not async iterable or iterator.")}function Tn(n){if(Ye(n))return n;if(De(n))return function*(){for(let e of n)yield e}();throw new te("Given collection is not iterable or iterator.")}function Cn(n){if((Ye(n)||De(n))&&(n=E(n)),mt(n))return function(){return Jo(this,arguments,function*(){var e,t,r,o;try{for(var i=!0,s=ri(n),a;a=yield ct(s.next()),e=a.done,!e;){o=a.value,i=!1;try{yield yield ct(o)}finally{i=!0}}}catch(l){t={error:l}}finally{try{!i&&!e&&(r=s.return)&&(yield ct(r.call(s)))}finally{if(t)throw t.error}}})}();throw new te("Given collection is not iterable or iterator.")}function _t(n){let e=[];for(let t of S(n))e.push(t);return e}function et(n){var e,t,r,o;return Go(this,void 0,void 0,function*(){let i=[];try{for(var s=!0,a=ri(E(n)),l;l=yield a.next(),e=l.done,!e;){o=l.value,s=!1;try{let u=o;i.push(u)}finally{s=!0}}}catch(u){t={error:u}}finally{try{!s&&!e&&(r=a.return)&&(yield r.call(a))}finally{if(t)throw t.error}}return i})}function ii(n){let e=new Map;for(let[t,r]of S(n))e.set(t,r);return e}function oi(n){var e,t,r,o;return Go(this,void 0,void 0,function*(){let i=new Map;try{for(var s=!0,a=ri(E(n)),l;l=yield a.next(),e=l.done,!e;){o=l.value,s=!1;try{let[u,c]=o;i.set(u,c)}finally{s=!0}}}catch(u){t={error:u}}finally{try{!s&&!e&&(r=a.return)&&(yield r.call(a))}finally{if(t)throw t.error}}return i})}function si(n){let e=new Set;for(let t of S(n))e.add(t);return e}function ai(n){var e,t,r,o;return Go(this,void 0,void 0,function*(){let i=new Set;try{for(var s=!0,a=ri(E(n)),l;l=yield a.next(),e=l.done,!e;){o=l.value,s=!1;try{let u=o;i.add(u)}finally{s=!0}}}catch(u){t={error:u}}finally{try{!s&&!e&&(r=a.return)&&(yield r.call(a))}finally{if(t)throw t.error}}return i})}function tn(n,e){return new fr(Tn(n),e).getRelatedIterables()}function nn(n,e){return new dr(Cn(n),e).getRelatedIterables()}var kl=function(n,e,t,r){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(c){try{u(r.next(c))}catch(d){s(d)}}function l(c){try{u(r.throw(c))}catch(d){s(d)}}function u(c){c.done?i(c.value):o(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})},se=function(n){return this instanceof se?(this.v=n,this):new se(n)},rn=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(s){return new Promise(function(a,l){s=n[i](s),o(a,l,s.done,s.value)})}}function o(i,s,a,l){Promise.resolve(l).then(function(u){i({value:u,done:a})},s)}},on=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),o,i=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(f){r[f]&&(o[f]=function(p){return new Promise(function(h,v){i.push([f,p,h,v])>1||a(f,p)})})}function a(f,p){try{l(r[f](p))}catch(h){d(i[0][3],h)}}function l(f){f.value instanceof se?Promise.resolve(f.value.v).then(u,c):d(i[0][2],f)}function u(f){a("next",f)}function c(f){a("throw",f)}function d(f,p){f(p),i.shift(),i.length&&a(i[0][0],i[0][1])}},Us=function(n){var e,t;return e={},r("next"),r("throw",function(o){throw o}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(o,i){e[o]=n[o]?function(s){return(t=!t)?{value:se(n[o](s)),done:o==="return"}:i?i(s):s}:i}};function*Ot(n,e){let t=new Set;if(n instanceof Map){e===void 0&&(e=r=>r[1]);for(let r of n){let o=e(r);t.has(o)||(yield r,t.add(o))}}else{e===void 0&&(e=r=>r);for(let r of S(n)){let o=e(r);t.has(o)||(yield r,t.add(o))}}}function sn(n,e){return on(this,arguments,function*(){var r,o,i,s;let a=new Set;if(n instanceof Map)for(let d of Ot(n,e))yield yield se(yield se(d));else{e===void 0&&(e=d=>d);try{for(var l=!0,u=rn(E(n)),c;c=yield se(u.next()),r=c.done,!r;){s=c.value,l=!1;try{let d=s,f=e(d);a.has(f)||(yield yield se(d),a.add(f))}finally{l=!0}}}catch(d){o={error:d}}finally{try{!l&&!r&&(i=u.return)&&(yield se(i.call(u)))}finally{if(o)throw o.error}}}})}function*li(...n){yield*an(n.length,...n)}function ui(...n){return on(this,arguments,function*(){yield se(yield*Us(rn(ln(n.length,...n))))})}function*an(n,...e){let t=new Tt,r=Mt(he.LONGEST,pe,...e);for(let o of r)for(let[i,s]of gt(o))s!==pe&&(t.addUsage(s,`${i}`),t.getOwnersCount(s)===n&&(yield s,t.deleteUsage(s)))}function ln(n,...e){return on(this,arguments,function*(){var r,o,i,s;let a=new Tt,l=kt(he.LONGEST,pe,...e);try{for(var u=!0,c=rn(l),d;d=yield se(c.next()),r=d.done,!r;){s=d.value,u=!1;try{let f=s;for(let[p,h]of gt(f))h!==pe&&(a.addUsage(h,`${p}`),a.getOwnersCount(h)===n&&(yield yield se(h),a.deleteUsage(h)))}finally{u=!0}}}catch(f){o={error:f}}finally{try{!u&&!r&&(i=c.return)&&(yield se(i.call(c)))}finally{if(o)throw o.error}}})}function*ci(...n){let e=new Tt,t=new Set,r=Mt(he.LONGEST,pe,...n);for(let o of r)for(let[i,s]of gt(o))s!==pe&&(e.addUsage(s,`${i}`),t.add(s),e.getOwnersCount(s)===n.length&&e.deleteUsage(s));for(let o of t)for(let i of Qt.repeat(o,e.getUsagesCount(o)))yield i}function fi(...n){return on(this,arguments,function*(){var t,r,o,i;let s=new Tt,a=new Set,l=kt(he.LONGEST,pe,...n);try{for(var u=!0,c=rn(l),d;d=yield se(c.next()),t=d.done,!t;){i=d.value,u=!1;try{let f=i;for(let[p,h]of gt(f))h!==pe&&(s.addUsage(h,`${p}`),a.add(h),s.getOwnersCount(h)===n.length&&s.deleteUsage(h))}finally{u=!0}}}catch(f){r={error:f}}finally{try{!u&&!t&&(o=c.return)&&(yield se(o.call(c)))}finally{if(r)throw r.error}}for(let f of a)for(let p of Qt.repeat(f,s.getUsagesCount(f)))yield yield se(p)})}function*di(...n){yield*an(1,...n)}function hi(...n){return on(this,arguments,function*(){yield se(yield*Us(rn(ln(1,...n))))})}function*pi(...n){if(n.length===0)return;if(n.length===1){for(let r of S(n[0]))yield[r];return}let t=_t(Et(n,r=>_t(r))).reduce((r,o)=>r.flatMap(i=>o.map(s=>[...i,s])),[[]]);for(let r of t)yield r}function mi(...n){return on(this,arguments,function*(){var t,r,o,i;if(n.length===0)return yield se(void 0);if(n.length===1){try{for(var s=!0,a=rn(E(n[0])),l;l=yield se(a.next()),t=l.done,!t;){i=l.value,s=!1;try{yield yield se([i])}finally{s=!0}}}catch(d){r={error:d}}finally{try{!s&&!t&&(o=a.return)&&(yield se(o.call(a)))}finally{if(r)throw r.error}}return yield se(void 0)}let c=(yield se(et(ut(n,d=>kl(this,void 0,void 0,function*(){return yield et(d)}))))).reduce((d,f)=>d.flatMap(p=>f.map(h=>[...p,h])),[[]]);for(let d of c)yield yield se(d)})}var de=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(s){return new Promise(function(a,l){s=n[i](s),o(a,l,s.done,s.value)})}}function o(i,s,a,l){Promise.resolve(l).then(function(u){i({value:u,done:a})},s)}},g=function(n){return this instanceof g?(this.v=n,this):new g(n)},_e=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),o,i=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(f){r[f]&&(o[f]=function(p){return new Promise(function(h,v){i.push([f,p,h,v])>1||a(f,p)})})}function a(f,p){try{l(r[f](p))}catch(h){d(i[0][3],h)}}function l(f){f.value instanceof g?Promise.resolve(f.value.v).then(u,c):d(i[0][2],f)}function u(f){a("next",f)}function c(f){a("throw",f)}function d(f,p){f(p),i.shift(),i.length&&a(i[0][0],i[0][1])}};function*Et(n,e){for(let t of S(n))yield e(t)}function ut(n,e){return _e(this,arguments,function*(){var r,o,i,s;try{for(var a=!0,l=de(E(n)),u;u=yield g(l.next()),r=u.done,!r;){s=u.value,a=!1;try{yield yield g(yield g(e(s)))}finally{a=!0}}}catch(c){o={error:c}}finally{try{!a&&!r&&(i=l.return)&&(yield g(i.call(l)))}finally{if(o)throw o.error}}})}function*yi(n,e){for(let[t,r]of Xt(n,e))r&&(yield t)}function _i(n,e){return _e(this,arguments,function*(){var r,o,i,s;try{for(var a=!0,l=de(Zt(n,e)),u;u=yield g(l.next()),r=u.done,!r;){s=u.value,a=!1;try{let[c,d]=s;d&&(yield yield g(c))}finally{a=!0}}}catch(c){o={error:c}}finally{try{!a&&!r&&(i=l.return)&&(yield g(i.call(l)))}finally{if(o)throw o.error}}})}function*gi(n,e){let t=!0;for(let r of S(n)){if(t){if(!e(r)){t=!1,yield r;continue}continue}yield r}}function vi(n,e){return _e(this,arguments,function*(){var r,o,i,s;let a=!0;try{for(var l=!0,u=de(E(n)),c;c=yield g(u.next()),r=c.done,!r;){s=c.value,l=!1;try{let d=s;if(a){if(!(yield g(e(d)))){a=!1,yield yield g(d);continue}continue}yield yield g(d)}finally{l=!0}}}catch(d){o={error:d}}finally{try{!l&&!r&&(i=u.return)&&(yield g(i.call(u)))}finally{if(o)throw o.error}}})}function*bi(n,e){for(let t of S(n))if(e(t))yield t;else break}function wi(n,e){return _e(this,arguments,function*(){var r,o,i,s;try{for(var a=!0,l=de(E(n)),u;u=yield g(l.next()),r=u.done,!r;){s=u.value,a=!1;try{let c=s;if(yield g(e(c)))yield yield g(c);else break}finally{a=!0}}}catch(c){o={error:c}}finally{try{!a&&!r&&(i=l.return)&&(yield g(i.call(l)))}finally{if(o)throw o.error}}})}function*Js(n,e){if(e<0)throw new te(`Number of repetitions cannot be negative: ${e}`);for(let t=e;t>0;--t)yield n}function Gs(n,e){return _e(this,arguments,function*(){if(e<0)throw new te(`Number of repetitions cannot be negative: ${e}`);let r=yield g(n);for(let o=e;o>0;--o)yield yield g(r)})}function*xi(n,e){for(let t of S(n)){let r=e(t,e);if(De(r))for(let o of S(r))yield o;else yield r}}function Mi(n,e){return _e(this,arguments,function*(){var r,o,i,s,a,l,u,c;try{for(var d=!0,f=de(E(n)),p;p=yield g(f.next()),r=p.done,!r;){s=p.value,d=!1;try{let J=yield g(e(s,e));if(De(J)||mt(J))try{for(var h=!0,v=(l=void 0,de(E(J))),F;F=yield g(v.next()),a=F.done,!a;){c=F.value,h=!1;try{yield yield g(c)}finally{h=!0}}}catch(H){l={error:H}}finally{try{!h&&!a&&(u=v.return)&&(yield g(u.call(v)))}finally{if(l)throw l.error}}else yield yield g(J)}finally{d=!0}}}catch(L){o={error:L}}finally{try{!d&&!r&&(i=f.return)&&(yield g(i.call(f)))}finally{if(o)throw o.error}}})}function*Dn(n,e=1/0){if(e<1){for(let t of S(n))n instanceof Map&&(t=t[1]),yield t;return}for(let t of S(n))if(n instanceof Map&&(t=t[1]),(De(t)||Ye(t))&&!lt(t))for(let r of Dn(t,e-1))yield r;else yield t}function Nn(n,e=1/0){return _e(this,arguments,function*(){var r,o,i,s,a,l,u,c,d,f,p,h;if(e<1){try{for(var v=!0,F=de(E(n)),L;L=yield g(F.next()),r=L.done,!r;){s=L.value,v=!1;try{let M=s;n instanceof Map&&(M=M[1]),yield yield g(M)}finally{v=!0}}}catch(M){o={error:M}}finally{try{!v&&!r&&(i=F.return)&&(yield g(i.call(F)))}finally{if(o)throw o.error}}return yield g(void 0)}try{for(var J=!0,H=de(E(n)),N;N=yield g(H.next()),a=N.done,!a;){c=N.value,J=!1;try{let M=c;if(n instanceof Map&&(M=M[1]),(mt(M)||De(M)||Ye(M))&&!lt(M))try{for(var Z=!0,ie=(f=void 0,de(Nn(M,e-1))),z;z=yield g(ie.next()),d=z.done,!d;){h=z.value,Z=!1;try{yield yield g(h)}finally{Z=!0}}}catch(T){f={error:T}}finally{try{!Z&&!d&&(p=ie.return)&&(yield g(p.call(ie)))}finally{if(f)throw f.error}}else yield yield g(M)}finally{J=!0}}}catch(M){l={error:M}}finally{try{!J&&!a&&(u=H.return)&&(yield g(u.call(H)))}finally{if(l)throw l.error}}})}function*ki(n,e){for(let t of S(n))e(t)&&(yield t)}function Ei(n,e){return _e(this,arguments,function*(){var r,o,i,s;try{for(var a=!0,l=de(E(n)),u;u=yield g(l.next()),r=u.done,!r;){s=u.value,a=!1;try{let c=s;(yield g(e(c)))&&(yield yield g(c))}finally{a=!0}}}catch(c){o={error:c}}finally{try{!a&&!r&&(i=l.return)&&(yield g(i.call(l)))}finally{if(o)throw o.error}}})}function*un(n,e,t,r=!0){if(e<1)throw new te(`Chunk size must be \u2265 1. Got ${e}`);if(t>=e)throw new te("Overlap size must be less than chunk size");let o=[],i=!1;for(let s of S(n))i=!1,o.push(s),o.length===e&&(yield o,o=o.slice(e-t),i=!0);!i&&o.length>0&&r&&(yield o)}function cn(n,e,t,r=!0){return _e(this,arguments,function*(){var i,s,a,l;if(e<1)throw new te(`Chunk size must be \u2265 1. Got ${e}`);if(t>=e)throw new te("Overlap size must be less than chunk size");let u=[],c=!1;try{for(var d=!0,f=de(E(n)),p;p=yield g(f.next()),i=p.done,!i;){l=p.value,d=!1;try{let h=l;c=!1,u.push(h),u.length===e&&(yield yield g(u),u=u.slice(e-t),c=!0)}finally{d=!0}}}catch(h){s={error:h}}finally{try{!d&&!i&&(a=f.return)&&(yield g(a.call(f)))}finally{if(s)throw s.error}}!c&&u.length>0&&r&&(yield yield g(u))})}function*Ai(n,e){for(let t of un(n,e,0))yield t}function Si(n,e){return _e(this,arguments,function*(){var r,o,i,s;try{for(var a=!0,l=de(cn(n,e,0)),u;u=yield g(l.next()),r=u.done,!r;){s=u.value,a=!1;try{yield yield g(s)}finally{a=!0}}}catch(c){o={error:c}}finally{try{!a&&!r&&(i=l.return)&&(yield g(i.call(l)))}finally{if(o)throw o.error}}})}function*yt(n){let e=un(n,2,1,!1);for(let t of e)yield t}function Ft(n){return _e(this,arguments,function*(){var t,r,o,i;let s=cn(n,2,1,!1);try{for(var a=!0,l=de(s),u;u=yield g(l.next()),t=u.done,!t;){i=u.value,a=!1;try{yield yield g(i)}finally{a=!0}}}catch(c){r={error:c}}finally{try{!a&&!t&&(o=l.return)&&(yield g(o.call(l)))}finally{if(r)throw r.error}}})}function*Ii(n,e){if(e<0)throw new te(`Limit must be \u2265 0. Got ${e}`);let t=0;for(let r of S(n)){if(t>=e)return;yield r,++t}}function Pi(n,e){return _e(this,arguments,function*(){var r,o,i,s;if(e<0)throw new te(`Limit must be \u2265 0. Got ${e}`);let a=0;try{for(var l=!0,u=de(E(n)),c;c=yield g(u.next()),r=c.done,!r;){s=c.value,l=!1;try{let d=s;if(a>=e)return yield g(void 0);yield yield g(d),++a}finally{l=!0}}}catch(d){o={error:d}}finally{try{!l&&!r&&(i=u.return)&&(yield g(i.call(u)))}finally{if(o)throw o.error}}})}function*gt(n){let e=0;for(let t of S(n))yield[e++,t]}function Ti(n){return _e(this,arguments,function*(){var t,r,o,i;let s=0;try{for(var a=!0,l=de(E(n)),u;u=yield g(l.next()),t=u.done,!t;){i=u.value,a=!1;try{let c=i;yield yield g([s++,c])}finally{a=!0}}}catch(c){r={error:c}}finally{try{!a&&!t&&(o=l.return)&&(yield g(o.call(l)))}finally{if(r)throw r.error}}})}function*Ci(n,e=0,t,r=1){if(e<0)throw new te("Parameter 'start' cannot be negative");if(t!==void 0&&t<0)throw new te("Parameter 'count' cannot be negative");if(r<=0)throw new te("Parameter 'step' must be positive");let o=0,i=0;for(let s of S(n))if(!(o++<e||(o-e-1)%r!==0)){if(i++===t&&t!==void 0)break;yield s}}function Fi(n,e=0,t,r=1){return _e(this,arguments,function*(){var i,s,a,l;if(e<0)throw new te("Parameter 'start' cannot be negative");if(t!==void 0&&t<0)throw new te("Parameter 'count' cannot be negative");if(r<=0)throw new te("Parameter 'step' must be positive");let u=0,c=0;try{for(var d=!0,f=de(E(n)),p;p=yield g(f.next()),i=p.done,!i;){l=p.value,d=!1;try{let h=l;if(u++<e||(u-e-1)%r!==0)continue;if(c++===t&&t!==void 0)break;yield yield g(h)}finally{d=!0}}}catch(h){s={error:h}}finally{try{!d&&!i&&(a=f.return)&&(yield g(a.call(f)))}finally{if(s)throw s.error}}})}function*Oi(n){for(let[e]of S(n))yield e}function Li(n){return _e(this,arguments,function*(){var t,r,o,i;try{for(var s=!0,a=de(E(n)),l;l=yield g(a.next()),t=l.done,!t;){i=l.value,s=!1;try{let[u]=i;yield yield g(u)}finally{s=!0}}}catch(u){r={error:u}}finally{try{!s&&!t&&(o=a.return)&&(yield g(o.call(a)))}finally{if(r)throw r.error}}})}function*Ri(n,e,t=0){if(e<0||t<0)throw new te;let r=-t;for(let o of S(n))(r<0||r>=e)&&(yield o),++r}function Di(n,e,t=0){return _e(this,arguments,function*(){var o,i,s,a;if(e<0||t<0)throw new te;let l=-t;try{for(var u=!0,c=de(E(n)),d;d=yield g(c.next()),o=d.done,!o;){a=d.value,u=!1;try{let f=a;(l<0||l>=e)&&(yield yield g(f)),++l}finally{u=!0}}}catch(f){i={error:f}}finally{try{!u&&!o&&(s=c.return)&&(yield g(s.call(c)))}finally{if(i)throw i.error}}})}function*Ni(n){for(let[,e]of S(n))yield e}function qi(n){return _e(this,arguments,function*(){var t,r,o,i;try{for(var s=!0,a=de(E(n)),l;l=yield g(a.next()),t=l.done,!t;){i=l.value,s=!1;try{let[,u]=i;yield yield g(u)}finally{s=!0}}}catch(u){r={error:u}}finally{try{!s&&!t&&(o=a.return)&&(yield g(o.call(a)))}finally{if(r)throw r.error}}})}function*ji(n,e,t){let r=new Map,o=i=>{r.has(i)||(t!==void 0?r.set(i,{}):r.set(i,[]))};for(let i of S(n)){let s=e(i),a=t!==void 0?t(i):void 0,l=(De(s)||Ye(s))&&!lt(s)?s:[s];for(let u of Ot(l))o(u),a===void 0?r.get(u).push(i):r.get(u)[a]=i}for(let i of r)yield i}function Wi(n,e,t){return _e(this,arguments,function*(){var o,i,s,a,l,u,c,d;let f=new Map,p=N=>{f.has(N)||(t!==void 0?f.set(N,{}):f.set(N,[]))};try{for(var h=!0,v=de(E(n)),F;F=yield g(v.next()),o=F.done,!o;){a=F.value,h=!1;try{let N=a,Z=yield g(e(N)),ie=t!==void 0?yield g(t(N)):void 0,z=(mt(Z)||De(Z)||Ye(Z))&&!lt(Z)?Z:[Z];try{for(var L=!0,J=(u=void 0,de(sn(z))),H;H=yield g(J.next()),l=H.done,!l;){d=H.value,L=!1;try{let M=d;p(M),ie===void 0?f.get(M).push(N):f.get(M)[ie]=N}finally{L=!0}}}catch(M){u={error:M}}finally{try{!L&&!l&&(c=J.return)&&(yield g(c.call(J)))}finally{if(u)throw u.error}}}finally{h=!0}}}catch(N){i={error:N}}finally{try{!h&&!o&&(s=v.return)&&(yield g(s.call(v)))}finally{if(i)throw i.error}}for(let N of f)yield yield g(N)})}function*zi(n,e){let t=_t(n);e!==void 0?t.sort(e):t.sort();for(let r of t)yield r}function Bi(n,e){return _e(this,arguments,function*(){let r=yield g(et(n));e!==void 0?r.sort(e):r.sort();for(let o of r)yield yield g(o)})}var Hs=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(s){return new Promise(function(a,l){s=n[i](s),o(a,l,s.done,s.value)})}}function o(i,s,a,l){Promise.resolve(l).then(function(u){i({value:u,done:a})},s)}},At=function(n){return this instanceof At?(this.v=n,this):new At(n)},El=function(n){var e,t;return e={},r("next"),r("throw",function(o){throw o}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(o,i){e[o]=n[o]?function(s){return(t=!t)?{value:At(n[o](s)),done:o==="return"}:i?i(s):s}:i}},Al=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),o,i=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(f){r[f]&&(o[f]=function(p){return new Promise(function(h,v){i.push([f,p,h,v])>1||a(f,p)})})}function a(f,p){try{l(r[f](p))}catch(h){d(i[0][3],h)}}function l(f){f.value instanceof At?Promise.resolve(f.value.v).then(u,c):d(i[0][2],f)}function u(f){a("next",f)}function c(f){a("throw",f)}function d(f,p){f(p),i.shift(),i.length&&a(i[0][0],i[0][1])}};function*Ys(n=1,e=1){for(let t=n;;t+=e)yield t}function*Ho(n){let e=[...S(n)];if(e.length!==0)for(;;)for(let t of e)yield t}function Vs(n){return Al(this,arguments,function*(){var t,r,o,i;let s=[];try{for(var a=!0,l=Hs(E(n)),u;u=yield At(l.next()),t=u.done,!t;){i=u.value,a=!1;try{let c=i;s.push(c),yield yield At(c)}finally{a=!0}}}catch(c){r={error:c}}finally{try{!a&&!t&&(o=l.return)&&(yield At(o.call(l)))}finally{if(r)throw r.error}}yield At(yield*El(Hs(Ho(s))))})}function*Qs(n){for(;;)yield n}var fn=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(s){return new Promise(function(a,l){s=n[i](s),o(a,l,s.done,s.value)})}}function o(i,s,a,l){Promise.resolve(l).then(function(u){i({value:u,done:a})},s)}},ne=function(n){return this instanceof ne?(this.v=n,this):new ne(n)},dn=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),o,i=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(f){r[f]&&(o[f]=function(p){return new Promise(function(h,v){i.push([f,p,h,v])>1||a(f,p)})})}function a(f,p){try{l(r[f](p))}catch(h){d(i[0][3],h)}}function l(f){f.value instanceof ne?Promise.resolve(f.value.v).then(u,c):d(i[0][2],f)}function u(f){a("next",f)}function c(f){a("throw",f)}function d(f,p){f(p),i.shift(),i.length&&a(i[0][0],i[0][1])}};function*Ui(n,e){let t=0;for(let r of qn(S(n),e))t++,yield r/t}function Ji(n,e){return dn(this,arguments,function*(){var r,o,i,s;let a=0;try{for(var l=!0,u=fn(jn(E(n),e)),c;c=yield ne(u.next()),r=c.done,!r;){s=c.value,l=!1;try{let d=s;a++,yield yield ne(d/a)}finally{l=!0}}}catch(d){o={error:d}}finally{try{!l&&!r&&(i=u.return)&&(yield ne(i.call(u)))}finally{if(o)throw o.error}}})}function*Gi(n,e){e!==void 0&&(yield e);let t=e!=null?e:0;for(let r of S(n))t-=Number(r),yield t}function Hi(n,e){return dn(this,arguments,function*(){var r,o,i,s;e!==void 0&&(yield yield ne(e));let a=e!=null?e:0;try{for(var l=!0,u=fn(E(n)),c;c=yield ne(u.next()),r=c.done,!r;){s=c.value,l=!1;try{a-=Number(s),yield yield ne(a)}finally{l=!0}}}catch(d){o={error:d}}finally{try{!l&&!r&&(i=u.return)&&(yield ne(i.call(u)))}finally{if(o)throw o.error}}})}function*Yi(n,e){e!==void 0&&(yield e);let t=e!=null?e:-1/0;for(let r of S(n))t=Math.max(t,r),yield t}function Vi(n,e){return dn(this,arguments,function*(){var r,o,i,s;e!==void 0&&(yield yield ne(e));let a=e!=null?e:-1/0;try{for(var l=!0,u=fn(E(n)),c;c=yield ne(u.next()),r=c.done,!r;){s=c.value,l=!1;try{a=Math.max(a,s),yield yield ne(a)}finally{l=!0}}}catch(d){o={error:d}}finally{try{!l&&!r&&(i=u.return)&&(yield ne(i.call(u)))}finally{if(o)throw o.error}}})}function*Qi(n,e){e!==void 0&&(yield e);let t=e!=null?e:1/0;for(let r of S(n))t=Math.min(t,r),yield t}function Xi(n,e){return dn(this,arguments,function*(){var r,o,i,s;e!==void 0&&(yield yield ne(e));let a=e!=null?e:1/0;try{for(var l=!0,u=fn(E(n)),c;c=yield ne(u.next()),r=c.done,!r;){s=c.value,l=!1;try{a=Math.min(a,s),yield yield ne(a)}finally{l=!0}}}catch(d){o={error:d}}finally{try{!l&&!r&&(i=u.return)&&(yield ne(i.call(u)))}finally{if(o)throw o.error}}})}function*Zi(n,e){e!==void 0&&(yield e);let t=e!=null?e:1;for(let r of S(n))t*=Number(r),yield t}function Ki(n,e){return dn(this,arguments,function*(){var r,o,i,s;e!==void 0&&(yield yield ne(e));let a=e!=null?e:1;try{for(var l=!0,u=fn(E(n)),c;c=yield ne(u.next()),r=c.done,!r;){s=c.value,l=!1;try{a*=Number(s),yield yield ne(a)}finally{l=!0}}}catch(d){o={error:d}}finally{try{!l&&!r&&(i=u.return)&&(yield ne(i.call(u)))}finally{if(o)throw o.error}}})}function*qn(n,e){e!==void 0&&(yield e);let t=e!=null?e:0;for(let r of S(n))t+=Number(r),yield t}function jn(n,e){return dn(this,arguments,function*(){var r,o,i,s;e!==void 0&&(yield yield ne(e));let a=e!=null?e:0;try{for(var l=!0,u=fn(E(n)),c;c=yield ne(u.next()),r=c.done,!r;){s=c.value,l=!1;try{a+=Number(s),yield yield ne(a)}finally{l=!0}}}catch(d){o={error:d}}finally{try{!l&&!r&&(i=u.return)&&(yield ne(i.call(u)))}finally{if(o)throw o.error}}})}var xt=class n{static of(e){return new n(S(e))}static ofEmpty(){return new n([])}static ofCount(e=1,t=1){return new n(vt.count(e,t))}static ofCycle(e){return new n(vt.cycle(e))}static ofRepeat(e){return new n(vt.repeat(e))}zipWith(...e){return this.data=Xt(this.data,...e),this}zipFilledWith(e,...t){return this.data=pr(e,this.data,...t),this}zipLongestWith(...e){return this.data=yr(this.data,...e),this}zipEqualWith(...e){return this.data=Kt(this.data,...e),this}chainWith(...e){return this.data=gr(this.data,...e),this}chunkwiseOverlap(e,t,r=!0){return this.data=un(this.data,e,t,r),this}chunkwise(e){return this.data=Ai(this.data,e),this}compress(e){return this.data=yi(this.data,e),this}dropWhile(e){return this.data=gi(this.data,e),this}filter(e){return this.data=ki(this.data,e),this}enumerate(){return this.data=gt(this.data),this}keys(){return this.data=Oi(this.data),this}limit(e){return this.data=Ii(this.data,e),this}map(e){return this.data=Et(this.data,e),this}flatMap(e){return this.data=xi(this.data,e),this}flatten(e=1/0){return this.data=Dn(this.data,e),this}groupBy(e,t){return this.data=ji(this.data,e,t),this}pairwise(){return this.data=yt(this.data),this}runningAverage(e){return this.data=Ui(this.data,e),this}runningDifference(e){return this.data=Gi(this.data,e),this}runningMax(e){return this.data=Yi(this.data,e),this}runningMin(e){return this.data=Qi(this.data,e),this}runningProduct(e){return this.data=Zi(this.data,e),this}runningTotal(e){return this.data=qn(this.data,e),this}skip(e,t=0){return this.data=Ri(this.data,e,t),this}slice(e=0,t,r=1){return this.data=Ci(this.data,e,t,r),this}takeWhile(e){return this.data=bi(this.data,e),this}values(){return this.data=Ni(this.data),this}sort(e){return this.data=zi(this.data,e),this}distinct(e){return this.data=Ot(this.data,e),this}intersectionWith(...e){return this.data=li(this.data,...e),this}partialIntersectionWith(e,...t){return this.data=an(e,this.data,...t),this}symmetricDifferenceWith(...e){return this.data=ci(this.data,...e),this}unionWith(...e){return this.data=di(this.data,...e),this}cartesianProductWith(...e){return this.data=pi(this.data,...e),this}peek(e){let[t,r]=tn(this.data,2);this.data=t;for(let o of r)e(o);return this}peekStream(e){let[t,r]=tn(this.data,2);return this.data=t,e(n.of(r)),this}toValue(e,t){return ze(this,e,t)}toAverage(){return wr(this)}toCount(){return Ct(this)}toMax(e){return Mr(this,e)}toMin(e){return Er(this,e)}toMinMax(e){return Ln(this,e)}toFirst(){return Or(this)}toFirstAndLast(){return Nr(this)}toLast(){return Rr(this)}toSum(){return Pr(this)}toProduct(){return Cr(this)}toRange(){return Sr(this)}allMatch(e){return jr(this,e)}allUnique(){return zr(this)}anyMatch(e){return Ur(this,e)}exactlyN(e,t){return Gr(this,e,t)}isSorted(){return Qr(this)}isReversed(){return Yr(this)}noneMatch(e){return Zr(this,e)}sameWith(...e){return $r(this.data,...e)}sameCountWith(...e){return ti(this.data,...e)}tee(e){return tn(this.data,e).map(t=>new n(t))}toArray(){return _t(this)}toMap(){return ii(this)}toSet(){return si(this)}*[Symbol.iterator](){for(let e of this.data)yield e}constructor(e){this.data=e}};var re=function(n,e,t,r){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(c){try{u(r.next(c))}catch(d){s(d)}}function l(c){try{u(r.throw(c))}catch(d){s(d)}}function u(c){c.done?i(c.value):o(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})},Xs=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(s){return new Promise(function(a,l){s=n[i](s),o(a,l,s.done,s.value)})}}function o(i,s,a,l){Promise.resolve(l).then(function(u){i({value:u,done:a})},s)}},hn=function(n){return this instanceof hn?(this.v=n,this):new hn(n)},Sl=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),o,i=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(f){r[f]&&(o[f]=function(p){return new Promise(function(h,v){i.push([f,p,h,v])>1||a(f,p)})})}function a(f,p){try{l(r[f](p))}catch(h){d(i[0][3],h)}}function l(f){f.value instanceof hn?Promise.resolve(f.value.v).then(u,c):d(i[0][2],f)}function u(f){a("next",f)}function c(f){a("throw",f)}function d(f,p){f(p),i.shift(),i.length&&a(i[0][0],i[0][1])}},$i=class n{static of(e){return new n(E(e))}static ofEmpty(){return new n(E([]))}static ofCount(e=1,t=1){return new n(E(vt.count(e,t)))}static ofCycle(e){return new n(vt.cycleAsync(e))}static ofRepeat(e){return new n(E(vt.repeat(e)))}zipWith(...e){return this.data=Zt(this.data,...e),this}zipFilledWith(e,...t){return this.data=mr(e,this.data,...t),this}zipLongestWith(...e){return this.data=_r(this.data,...e),this}zipEqualWith(...e){return this.data=$t(this.data,...e),this}chainWith(...e){return this.data=vr(this.data,...e),this}chunkwiseOverlap(e,t,r=!0){return this.data=cn(this.data,e,t,r),this}chunkwise(e){return this.data=Si(this.data,e),this}compress(e){return this.data=_i(this.data,e),this}dropWhile(e){return this.data=vi(this.data,e),this}filter(e){return this.data=Ei(this.data,e),this}enumerate(){return this.data=Ti(this.data),this}keys(){return this.data=Li(this.data),this}limit(e){return this.data=Pi(this.data,e),this}map(e){return this.data=ut(this.data,e),this}flatMap(e){return this.data=Mi(this.data,e),this}flatten(e=1/0){return this.data=Nn(this.data,e),this}groupBy(e,t){return this.data=Wi(this.data,e,t),this}pairwise(){return this.data=Ft(this.data),this}runningAverage(e){return this.data=Ji(this.data,e),this}runningDifference(e){return this.data=Hi(this.data,e),this}runningMax(e){return this.data=Vi(this.data,e),this}runningMin(e){return this.data=Xi(this.data,e),this}runningProduct(e){return this.data=Ki(this.data,e),this}runningTotal(e){return this.data=jn(this.data,e),this}skip(e,t=0){return this.data=Di(this.data,e,t),this}slice(e=0,t,r=1){return this.data=Fi(this.data,e,t,r),this}takeWhile(e){return this.data=wi(this.data,e),this}values(){return this.data=qi(this.data),this}sort(e){return this.data=Bi(this.data,e),this}distinct(e){return this.data=sn(this.data,e),this}intersectionWith(...e){return this.data=ui(this.data,...e),this}partialIntersectionWith(e,...t){return this.data=ln(e,this.data,...t),this}symmetricDifferenceWith(...e){return this.data=fi(this.data,...e),this}unionWith(...e){return this.data=hi(this.data,...e),this}cartesianProductWith(...e){return this.data=mi(this.data,...e),this}peek(e){let[t,r]=nn(this.data,2);return this.data=t,re(this,void 0,void 0,function*(){var o,i,s,a;try{for(var l=!0,u=Xs(r),c;c=yield u.next(),o=c.done,!o;){a=c.value,l=!1;try{e(a)}finally{l=!0}}}catch(d){i={error:d}}finally{try{!l&&!o&&(s=u.return)&&(yield s.call(u))}finally{if(i)throw i.error}}}),this}peekStream(e){let[t,r]=nn(this.data,2);return this.data=t,e(n.of(r)),this}toValue(e,t){return re(this,void 0,void 0,function*(){return yield Be(this,e,t)})}toAverage(){return re(this,void 0,void 0,function*(){return yield xr(this)})}toCount(){return re(this,void 0,void 0,function*(){return yield en(this)})}toMax(e){return re(this,void 0,void 0,function*(){return yield kr(this,e)})}toMin(e){return re(this,void 0,void 0,function*(){return yield Ar(this,e)})}toMinMax(e){return re(this,void 0,void 0,function*(){return yield Rn(this,e)})}toFirst(){return re(this,void 0,void 0,function*(){return yield Lr(this)})}toFirstAndLast(){return re(this,void 0,void 0,function*(){return yield qr(this)})}toLast(){return re(this,void 0,void 0,function*(){return yield Dr(this)})}toSum(){return re(this,void 0,void 0,function*(){return yield Tr(this)})}toProduct(){return re(this,void 0,void 0,function*(){return yield Fr(this)})}toRange(){return re(this,void 0,void 0,function*(){return yield Ir(this)})}allMatch(e){return re(this,void 0,void 0,function*(){return yield Wr(this,e)})}allUnique(){return re(this,void 0,void 0,function*(){return yield Br(this)})}anyMatch(e){return re(this,void 0,void 0,function*(){return yield Jr(this,e)})}exactlyNAsync(e,t){return re(this,void 0,void 0,function*(){return Hr(this,e,t)})}isSorted(){return re(this,void 0,void 0,function*(){return yield Xr(this)})}isReversed(){return re(this,void 0,void 0,function*(){return yield Vr(this)})}noneMatch(e){return re(this,void 0,void 0,function*(){return yield Kr(this,e)})}sameWith(...e){return re(this,void 0,void 0,function*(){return yield ei(this.data,...e)})}sameCountWith(...e){return re(this,void 0,void 0,function*(){return yield ni(this.data,...e)})}tee(e){return nn(this.data,e).map(t=>new n(t))}toArray(){return re(this,void 0,void 0,function*(){return yield et(this)})}toMap(){return re(this,void 0,void 0,function*(){return yield oi(this)})}toSet(){return re(this,void 0,void 0,function*(){return yield ai(this)})}[Symbol.asyncIterator](){return Sl(this,arguments,function*(){var t,r,o,i;try{for(var s=!0,a=Xs(this.data),l;l=yield hn(a.next()),t=l.done,!t;){i=l.value,s=!1;try{yield yield hn(i)}finally{s=!0}}}catch(u){r={error:u}}finally{try{!s&&!t&&(o=a.return)&&(yield hn(o.call(a)))}finally{if(r)throw r.error}}})}constructor(e){this.data=e}};var Qt={chunkwise:Ai,chunkwiseOverlap:un,compress:yi,dropWhile:gi,enumerate:gt,filter:ki,flatMap:xi,flatten:Dn,groupBy:ji,keys:Oi,limit:Ii,map:Et,pairwise:yt,repeat:Js,skip:Ri,slice:Ci,sort:zi,takeWhile:bi,values:Ni,chunkwiseAsync:Si,chunkwiseOverlapAsync:cn,compressAsync:_i,dropWhileAsync:vi,enumerateAsync:Ti,filterAsync:Ei,flatMapAsync:Mi,flattenAsync:Nn,groupByAsync:Wi,keysAsync:Li,limitAsync:Pi,mapAsync:ut,pairwiseAsync:Ft,repeatAsync:Gs,skipAsync:Di,sliceAsync:Fi,sortAsync:Bi,takeWhileAsync:wi,valuesAsync:qi},vt={count:Ys,cycle:Ho,cycleAsync:Vs,repeat:Qs},Il={runningAverage:Ui,runningDifference:Gi,runningMax:Yi,runningMin:Qi,runningProduct:Zi,runningTotal:qn,runningAverageAsync:Ji,runningDifferenceAsync:Hi,runningMaxAsync:Vi,runningMinAsync:Xi,runningProductAsync:Ki,runningTotalAsync:jn},Pl={chain:gr,zip:Xt,zipFilled:pr,zipLongest:yr,zipEqual:Kt,chainAsync:vr,zipAsync:Zt,zipFilledAsync:mr,zipLongestAsync:_r,zipEqualAsync:$t},Tl={distinct:Ot,intersection:li,partialIntersection:an,symmetricDifference:ci,union:di,cartesianProduct:pi,distinctAsync:sn,intersectionAsync:ui,partialIntersectionAsync:ln,symmetricDifferenceAsync:fi,unionAsync:hi,cartesianProductAsync:mi},hr={toAverage:wr,toCount:Ct,toFirst:Or,toFirstAndLast:Nr,toLast:Rr,toMax:Mr,toMin:Er,toMinMax:Ln,toProduct:Cr,toRange:Sr,toSum:Pr,toValue:ze,toAverageAsync:xr,toCountAsync:en,toFirstAsync:Lr,toFirstAndLastAsync:qr,toLastAsync:Dr,toMaxAsync:kr,toMinAsync:Ar,toMinMaxAsync:Rn,toProductAsync:Fr,toRangeAsync:Ir,toSumAsync:Tr,toValueAsync:Be},Cl={allMatch:jr,allUnique:zr,anyMatch:Ur,exactlyN:Gr,isEmpty:zs,isAsyncIterable:mt,isIterable:De,isIterator:Ye,isReversed:Yr,isSorted:Qr,isString:lt,noneMatch:Zr,same:$r,sameCount:ti,allMatchAsync:Wr,allUniqueAsync:Br,anyMatchAsync:Jr,exactlyNAsync:Hr,isEmptyAsync:Bs,isReversedAsync:Vr,isSortedAsync:Xr,noneMatchAsync:Kr,sameAsync:ei,sameCountAsync:ni},Fl={tee:tn,toArray:_t,toAsyncIterable:E,toAsyncIterator:Cn,toIterable:S,toIterator:Tn,toMap:ii,toSet:si,teeAsync:nn,toArrayAsync:et,toMapAsync:oi,toSetAsync:ai};var eo=class{constructor(e){this.apiInstance=e}parsinom(){return{P:Zs.P,P_UTILS:Ks.P_UTILS,Parser:$s.Parser,createParsingErrorMessage:to.createParsingErrorMessage,ParsingError:to.ParsingError,ParserContext:ea.ParserContext}}itertools(){return Yo}};var ta=require("obsidian");var no=class{constructor(e){this.apiInstance=e}async execute(e){return await this.apiInstance.plugin.jsEngine.execute(e)}createRenderer(e,t,r){return new Ht(this.apiInstance.plugin,e,t,r)}async executeFile(e,t){let r=this.apiInstance.app.vault.getAbstractFileByPath(e);if(!r||!(r instanceof ta.TFile))throw new Error(`File ${e} not found.`);let o=t;return o.code=await this.apiInstance.app.vault.read(r),await this.execute(o)}};var pn=class{constructor(e,t,r){this.app=e,this.plugin=t,this.instanceId=r,this.markdown=new er(this),this.message=new tr(this),this.lib=new eo(this),this.internal=new no(this)}async importJs(e){let t=this.app.vault.adapter.getResourcePath(e);if(!t.includes("?")){let r=this.app.metadataCache.getFirstLinkpathDest(e,"");r&&(t+="?"+r.stat.mtime)}return import(t)}getPlugin(e){return this.app.plugins.getPlugin(e)}reactive(e,...t){return new Gt(e,t)}};var mn=class n{constructor(e,t){this.name=e,this.id=t}static create(e){return new n(e,self.crypto.randomUUID())}};var Ll=async function(){}.constructor,ro=class{constructor(e){this.app=e.app,this.plugin=e.plugin,this.code=e.code,this.context=Object.assign({},e.context,e.contextOverrides),this.uuid=self.crypto.randomUUID(),this.apiInstance=new pn(this.app,this.plugin,new mn("JS_EXECUTION",this.uuid)),this.messages=[],this.func=void 0,this.args=[{key:"app",value:this.app},{key:"engine",value:this.apiInstance},{key:"context",value:this.context},{key:"component",value:e.component},{key:"container",value:e.container}]}buildFunction(){var t;let e=performance.now();try{this.func=Ll(...this.args.map(r=>r.key),this.code)}catch(r){r instanceof Error&&(this.functionBuildError=r,this.result=(t=this.plugin.api)==null?void 0:t.message.createMessage("error","Failed to parse JS",`Failed to parse JS during execution "${this.uuid}"`,r.stack))}this.functionBuildTime=performance.now()-e}async runFunction(){if(this.functionBuildError)throw new Error("can not run function, function construction failed");if(!this.func)throw new Error("can not run function, function has not been constructed yet");let e=performance.now();try{this.result=await Promise.resolve(this.func(...this.args.map(t=>t.value)))}catch(t){t instanceof Error&&(this.functionRunError=t,this.result=this.apiInstance.message.createMessage("error","Failed to execute JS",`Failed to execute JS during execution "${this.uuid}"`,t.stack))}this.messages=this.apiInstance.message.getMessagesForInstance(),this.functionRunTime=performance.now()-e}isSuccessful(){return!this.functionBuildError&&!this.functionRunError}getMessages(){return this.messages}openStatsModal(){this.plugin.jsEngine.openExecutionStatsModal(this)}};var ua=require("obsidian");function na(n,e,t){let r=n.slice();return r[2]=e[t],r}function ra(n,e,t){let r=n.slice();return r[5]=e[t],r}function ia(n){let e;return{c(){e=b("tr"),e.innerHTML="<td>none</td> <td>-</td> "},m(t,r){I(t,e,r)},p:Y,d(t){t&&A(e)}}}function oa(n,e){let t,r,o=e[5].key+"",i,s,a,l=typeof e[5].value,u,c;return{key:n,first:null,c(){t=b("tr"),r=b("td"),i=G(o),s=B(),a=b("td"),u=G(l),c=B(),this.first=t},m(d,f){I(d,t,f),_(t,r),_(r,i),_(t,s),_(t,a),_(a,u),_(t,c)},p(d,f){e=d,f&1&&o!==(o=e[5].key+"")&&ue(i,o),f&1&&l!==(l=typeof e[5].value)&&ue(u,l)},d(d){d&&A(t)}}}function sa(n){let e;return{c(){e=b("p"),e.textContent="None"},m(t,r){I(t,e,r)},p:Y,d(t){t&&A(e)}}}function aa(n){let e,t;return e=new Jt({props:{messageWrapper:n[2],messageManager:n[0].plugin.messageManager,showDeleteButton:!1,showMessageSource:!1}}),{c(){qe(e.$$.fragment)},m(r,o){Ie(e,r,o),t=!0},p(r,o){let i={};o&1&&(i.messageManager=r[0].plugin.messageManager),e.$set(i)},i(r){t||(q(e.$$.fragment,r),t=!0)},o(r){U(e.$$.fragment,r),t=!1},d(r){Pe(e,r)}}}function Rl(n){var Qo,Xo;let e,t,r,o,i,s=n[0].uuid+"",a,l,u,c,d,f,p=n[0].code+"",h,v,F,L,J,H,N=Math.round((Qo=n[0].functionBuildTime)!=null?Qo:0)+"",Z,ie,z,M,T,V=Math.round((Xo=n[0].functionRunTime)!=null?Xo:0)+"",ce,k,y,m,x,w,C,O,Q,K,X=[],me=new Map,xe,tt,nt,Ue,be,ae=Je(n[0].args),Ve=R=>R[5].key;for(let R=0;R<ae.length;R+=1){let ee=ra(n,ae,R),Ee=Ve(ee);me.set(Ee,X[R]=oa(Ee,ee))}let fe=null;ae.length||(fe=ia(n));let Me=Je(n[1]),le=[];for(let R=0;R<Me.length;R+=1)le[R]=aa(na(n,Me,R));let fa=R=>U(le[R],1,1,()=>{le[R]=null}),ke=null;return Me.length||(ke=sa(n)),{c(){e=b("div"),t=b("h2"),t.textContent="JS Execution Stats",r=B(),o=b("p"),i=G("Execution ID: "),a=G(s),l=B(),u=b("h3"),u.textContent="Code",c=B(),d=b("pre"),f=b("code"),h=G(p),v=B(),F=b("h3"),F.textContent="Time",L=B(),J=b("p"),H=G("Build Time: "),Z=G(N),ie=G(" ms"),z=B(),M=b("p"),T=G("Execution Time: "),ce=G(V),k=G(" ms"),y=B(),m=b("h3"),m.textContent="Arguments",x=B(),w=b("div"),C=b("table"),O=b("thead"),O.innerHTML="<tr><th>Argument Name</th> <th>Value Type</th></tr>",Q=B(),K=b("tbody");for(let R=0;R<X.length;R+=1)X[R].c();fe&&fe.c(),xe=B(),tt=b("h3"),tt.textContent="Messages",nt=B(),Ue=b("div");for(let R=0;R<le.length;R+=1)le[R].c();ke&&ke.c(),P(d,"class","language-none"),P(w,"class","markdown-rendered")},m(R,ee){I(R,e,ee),_(e,t),_(e,r),_(e,o),_(o,i),_(o,a),_(e,l),_(e,u),_(e,c),_(e,d),_(d,f),_(f,h),_(e,v),_(e,F),_(e,L),_(e,J),_(J,H),_(J,Z),_(J,ie),_(e,z),_(e,M),_(M,T),_(M,ce),_(M,k),_(e,y),_(e,m),_(e,x),_(e,w),_(w,C),_(C,O),_(C,Q),_(C,K);for(let Ee=0;Ee<X.length;Ee+=1)X[Ee]&&X[Ee].m(K,null);fe&&fe.m(K,null),_(e,xe),_(e,tt),_(e,nt),_(e,Ue);for(let Ee=0;Ee<le.length;Ee+=1)le[Ee]&&le[Ee].m(Ue,null);ke&&ke.m(Ue,null),be=!0},p(R,[ee]){var Ee,Zo;if((!be||ee&1)&&s!==(s=R[0].uuid+"")&&ue(a,s),(!be||ee&1)&&p!==(p=R[0].code+"")&&ue(h,p),(!be||ee&1)&&N!==(N=Math.round((Ee=R[0].functionBuildTime)!=null?Ee:0)+"")&&ue(Z,N),(!be||ee&1)&&V!==(V=Math.round((Zo=R[0].functionRunTime)!=null?Zo:0)+"")&&ue(ce,V),ee&1&&(ae=Je(R[0].args),X=ys(X,ee,Ve,1,R,ae,me,K,ms,oa,null,ra),!ae.length&&fe?fe.p(R,ee):ae.length?fe&&(fe.d(1),fe=null):(fe=ia(R),fe.c(),fe.m(K,null))),ee&3){Me=Je(R[1]);let Ae;for(Ae=0;Ae<Me.length;Ae+=1){let Ko=na(R,Me,Ae);le[Ae]?(le[Ae].p(Ko,ee),q(le[Ae],1)):(le[Ae]=aa(Ko),le[Ae].c(),q(le[Ae],1),le[Ae].m(Ue,null))}for(Xe(),Ae=Me.length;Ae<le.length;Ae+=1)fa(Ae);Ze(),!Me.length&&ke?ke.p(R,ee):Me.length?ke&&(ke.d(1),ke=null):(ke=sa(R),ke.c(),ke.m(Ue,null))}},i(R){if(!be){for(let ee=0;ee<Me.length;ee+=1)q(le[ee]);be=!0}},o(R){le=le.filter(Boolean);for(let ee=0;ee<le.length;ee+=1)U(le[ee]);be=!1},d(R){R&&A(e);for(let ee=0;ee<X.length;ee+=1)X[ee].d();fe&&fe.d(),qt(le,R),ke&&ke.d()}}}function Dl(n,e,t){let{execution:r}=e,o=r.getMessages();return n.$$set=i=>{"execution"in i&&t(0,r=i.execution)},[r,o]}var Vo=class extends D{constructor(e){super(),W(this,e,Dl,Rl,j,{execution:0})}},la=Vo;var io=class extends ua.Modal{constructor(t,r){super(t);this.plugin=r}setExecution(t){this.execution=t}onOpen(){this.contentEl.empty(),this.component&&this.component.$destroy(),this.contentEl.hasClass("js-engine-execution-stats-modal")||this.contentEl.addClass("js-engine-execution-stats-modal"),this.component=new la({target:this.contentEl,props:{execution:this.execution}})}onClose(){this.contentEl.empty(),this.component&&this.component.$destroy()}};var oo=class{constructor(e,t){this.app=e,this.plugin=t,this.executionStatsModal=new io(this.app,this.plugin),this.activeExecutions=new Map}async execute(e){let t=new ro({app:this.app,plugin:this.plugin,...e});return this.activeExecutions.set(t.uuid,t),t.buildFunction(),t.functionBuildError||await t.runFunction(),this.activeExecutions.delete(t.uuid),t}openExecutionStatsModal(e){this.executionStatsModal.setExecution(e),this.executionStatsModal.open()}};var so=class extends ca.Plugin{constructor(t,r){super(t,r);this.messageManager=new Zn(this.app,this),this.jsEngine=new oo(this.app,this),this.api=new pn(this.app,this,mn.create("PLUGIN"))}async onload(){await this.loadSettings(),this.messageManager.initStatusBarItem(),this.registerMarkdownCodeBlockProcessor("js-engine",(t,r,o)=>{let i=new $n(r,this,t,o);o.addChild(i)}),this.app.workspace.onLayoutReady(async()=>{await this.registerCodeMirrorMode()})}onunload(){}async loadSettings(){let t=await this.loadData();this.settings=Object.assign({},ts,t)}async saveSettings(){await this.saveData(this.settings)}async registerCodeMirrorMode(){let t=window.CodeMirror.getMode({},"javascript");if(t==null||t.name==="null"){console.log("Couldn't find js mode, can't enable syntax highlighting.");return}window.CodeMirror.defineMode("js-engine",r=>({startState:()=>({...window.CodeMirror.startState(t)}),blankLine:i=>null,copyState:i=>({...window.CodeMirror.startState(t)}),token:(i,s)=>`line-HyperMD-codeblock ${t.token&&t.token(i,s)}`}))}};
